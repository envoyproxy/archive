<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>External Authorization (proto) &mdash; envoy tag-v1.32.7 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=d7d10ef0" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/envoy.css?v=3ec0219e" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/tabs.css?v=4da122e5" />

  
    <link rel="shortcut icon" href="../../../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../../../_static/documentation_options.js?v=798fa41c"></script>
        <script src="../../../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../../../../_static/copybutton.js?v=db7b0edf"></script>
    <script src="../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <link rel="next" title="External Processing Filter (proto)" href="../../ext_proc/v3/ext_proc.proto.html" />
    <link rel="prev" title="Dynamo (proto)" href="../../dynamo/v3/dynamo.proto.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../index.html">
            
              <img src="../../../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                tag-v1.32.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../../api.html">v3 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../../../config/config.html">Extensions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/accesslog/filters.html">Access log extension filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/formatter/formatter.html">Access log formatters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/accesslog/accesslog.html">Access loggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/cluster/cluster.html">Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/common/common.html">Common</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/compression/compression.html">Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/config_validators/config_validators.html">Config validators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/contrib/contrib.html">Contrib extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/dns_resolver/dns_resolver.html">DNS resolver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/endpoint/endpoint.html">Endpoint</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../../../../../config/filter/filter.html">Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/grpc_credential/grpc_credential.html">Grpc credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/health_check_event_sinks/health_check_event_sinks.html">Health check event sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/health_checker/health_checker.html">Health checkers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/early_header_mutation.html">HTTP early header mutation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/custom_response.html">Custom response policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/header_formatters.html">HTTP header formatters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/header_validators.html">HTTP header validators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/original_ip_detection.html">HTTP original IP detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/stateful_session.html">HTTP stateful session</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/injected_credentials/injected_credentials.html">Injected credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/geoip_provider/geoip_provider.html">Geolocation providers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/trace/trace.html">HTTP tracers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/internal_redirect/internal_redirect.html">Internal redirect predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/path/match/path_matcher.html">Path matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/path/rewrite/path_rewriter.html">Path rewriter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/quic/quic_extensions.html">Quic extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/descriptors/descriptors.html">Rate limit descriptors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/rbac/rbac.html">RBAC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/rbac/matchers.html">RBAC matchers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/request_id/request_id.html">Request ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/resource_monitor/resource_monitor.html">Resource monitors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/retry/retry.html">Retry predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/stat_sinks/stat_sinks.html">Stat sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/string_matcher/string_matcher.html">String Matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/transport_socket/transport_socket.html">Transport sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/upstream/upstream.html">Upstream configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/wasm/wasm.html">WASM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/watchdog/watchdog.html">Watchdog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/load_balancing_policies/load_balancing_policies.html">Load balancing policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/cluster_specifier/cluster_specifier.html">Cluster specifier</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../service/service.html">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../common_messages/common_messages_xds.html">Common messages (XDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../version_history/version_history.html">Version history</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../../../api/api.html">API</a></li>
          <li class="breadcrumb-item"><a href="../../../../../api.html">v3 API reference</a></li>
          <li class="breadcrumb-item"><a href="../../../../../config/config.html">Extensions</a></li>
          <li class="breadcrumb-item"><a href="../../../../../config/filter/filter.html">Filters</a></li>
          <li class="breadcrumb-item"><a href="../../../../../config/filter/http/http.html">HTTP filters</a></li>
      <li class="breadcrumb-item active">External Authorization (proto)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../_sources/api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="external-authorization-proto">
<span id="envoy-v3-api-file-envoy-extensions-filters-http-ext-authz-v3-ext-authz-proto"></span><h1>External Authorization (proto)<a class="headerlink" href="#external-authorization-proto" title="Link to this heading"></a></h1>
<p id="extension-envoy-filters-http-ext-authz">This extension has the qualified name <code class="docutils literal notranslate"><span class="pre">envoy.filters.http.ext_authz</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This extension is intended to be robust against untrusted downstream traffic. It
assumes that the upstream is trusted.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This extension extends and can be used with the following extension category:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../network/http_connection_manager/v3/http_connection_manager.proto.html#extension-category-envoy-filters-http"><span class="std std-ref">envoy.filters.http</span></a></p></li>
</ul>
<p>This extension must be configured with one of the following type URLs:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-extauthz"><span class="std std-ref">type.googleapis.com/envoy.extensions.filters.http.ext_authz.v3.ExtAuthz</span></a></p></li>
<li><p><a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-extauthzperroute"><span class="std std-ref">type.googleapis.com/envoy.extensions.filters.http.ext_authz.v3.ExtAuthzPerRoute</span></a></p></li>
</ul>
</div>
<p>External Authorization <a class="reference internal" href="../../../../../../configuration/http/http_filters/ext_authz_filter.html#config-http-filters-ext-authz"><span class="std std-ref">configuration overview</span></a>.</p>
<section id="extensions-filters-http-ext-authz-v3-extauthz">
<span id="envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-extauthz"></span><h2>extensions.filters.http.ext_authz.v3.ExtAuthz<a class="headerlink" href="#extensions-filters-http-ext-authz-v3-extauthz" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.7/api/envoy/extensions/filters/http/ext_authz/v3/ext_authz.proto#L33">[extensions.filters.http.ext_authz.v3.ExtAuthz proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;grpc_service&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;http_service&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;transport_api_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;failure_mode_allow&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;failure_mode_allow_header_add&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;with_request_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;clear_route_cache&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status_on_error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;validate_mutations&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata_context_namespaces&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;typed_metadata_context_namespaces&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;route_metadata_context_namespaces&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;route_typed_metadata_context_namespaces&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;filter_enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;filter_enabled_metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;deny_at_disable&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;include_peer_certificate&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;stat_prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;bootstrap_metadata_labels_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;allowed_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;disallowed_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;include_tls_session&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;charge_cluster_response_stats&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;encode_raw_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;decoder_header_mutation_rules&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;enable_dynamic_metadata_ingestion&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;filter_metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;emit_filter_state_stats&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-grpc-service">
<dt>grpc_service</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/grpc_service.proto.html#envoy-v3-api-msg-config-core-v3-grpcservice"><span class="std std-ref">config.core.v3.GrpcService</span></a>) gRPC service configuration (default timeout: 200ms).</p>
<p>External authorization service configuration.</p>
<p>Only one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-grpc-service"><span class="std std-ref">grpc_service</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-http-service"><span class="std std-ref">http_service</span></a> may be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-http-service">
<dt>http_service</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-httpservice"><span class="std std-ref">extensions.filters.http.ext_authz.v3.HttpService</span></a>) HTTP service configuration (default timeout: 200ms).</p>
<p>External authorization service configuration.</p>
<p>Only one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-grpc-service"><span class="std std-ref">grpc_service</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-http-service"><span class="std std-ref">http_service</span></a> may be set.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-transport-api-version">
<dt>transport_api_version</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/config_source.proto.html#envoy-v3-api-enum-config-core-v3-apiversion"><span class="std std-ref">config.core.v3.ApiVersion</span></a>) API version for ext_authz transport protocol. This describes the ext_authz gRPC endpoint and
version of messages used on the wire.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-failure-mode-allow">
<dt>failure_mode_allow</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>)  Changes filter’s behaviour on errors:</p>
<blockquote>
<div><p>1. When set to true, the filter will <code class="docutils literal notranslate"><span class="pre">accept</span></code> client request even if the communication with
the authorization service has failed, or if the authorization service has returned a HTTP 5xx
error.</p>
<p>2. When set to false, ext-authz will <code class="docutils literal notranslate"><span class="pre">reject</span></code> client requests and return a <code class="docutils literal notranslate"><span class="pre">Forbidden</span></code>
response if the communication with the authorization service has failed, or if the
authorization service has returned a HTTP 5xx error.</p>
</div></blockquote>
<p>Note that errors can be <code class="docutils literal notranslate"><span class="pre">always</span></code> tracked in the <a class="reference internal" href="../../../../../../configuration/http/http_filters/ext_authz_filter.html#config-http-filters-ext-authz-stats"><span class="std std-ref">stats</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-failure-mode-allow-header-add">
<dt>failure_mode_allow_header_add</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) When <code class="docutils literal notranslate"><span class="pre">failure_mode_allow</span></code> and <code class="docutils literal notranslate"><span class="pre">failure_mode_allow_header_add</span></code> are both set to true,
<code class="docutils literal notranslate"><span class="pre">x-envoy-auth-failure-mode-allowed:</span> <span class="pre">true</span></code> will be added to request headers if the communication
with the authorization service has failed, or if the authorization service has returned a
HTTP 5xx error.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-with-request-body">
<dt>with_request_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-buffersettings"><span class="std std-ref">extensions.filters.http.ext_authz.v3.BufferSettings</span></a>) Enables filter to buffer the client request body and send it within the authorization request.
A <code class="docutils literal notranslate"><span class="pre">x-envoy-auth-partial-body:</span> <span class="pre">false|true</span></code> metadata header will be added to the authorization
request message indicating if the body data is partial.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-clear-route-cache">
<dt>clear_route_cache</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Clears route cache in order to allow the external authorization service to correctly affect
routing decisions. Filter clears all cached routes when:</p>
<ol class="arabic simple">
<li><p>The field is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>The status returned from the authorization service is a HTTP 200 or gRPC 0.</p></li>
</ol>
<p>3. At least one <code class="docutils literal notranslate"><span class="pre">authorization</span> <span class="pre">response</span> <span class="pre">header</span></code> is added to the client request, or is used for
altering another client request header.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-status-on-error">
<dt>status_on_error</dt><dd><p>(<a class="reference internal" href="../../../../../type/v3/http_status.proto.html#envoy-v3-api-msg-type-v3-httpstatus"><span class="std std-ref">type.v3.HttpStatus</span></a>) Sets the HTTP status that is returned to the client when the authorization server returns an error
or cannot be reached. The default status is HTTP 403 Forbidden.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-validate-mutations">
<dt>validate_mutations</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) When this is set to true, the filter will check the <a class="reference internal" href="../../../../../service/auth/v3/external_auth.proto.html#envoy-v3-api-msg-service-auth-v3-checkresponse"><span class="std std-ref">ext_authz response</span></a> for invalid header &amp;
query parameter mutations. If the side stream response is invalid, it will send a local reply
to the downstream request with status HTTP 500 Internal Server Error.</p>
<p>Note that headers_to_remove &amp; query_parameters_to_remove are validated, but invalid elements in
those fields should not affect any headers &amp; thus will not cause the filter to send a local
reply.</p>
<p>When set to false, any invalid mutations will be visible to the rest of envoy and may cause
unexpected behavior.</p>
<p>If you are using ext_authz with an untrusted ext_authz server, you should set this to true.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-metadata-context-namespaces">
<dt>metadata_context_namespaces</dt><dd><p>(<strong>repeated</strong> <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies a list of metadata namespaces whose values, if present, will be passed to the
ext_authz service. The <a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-metadata-filter-metadata"><span class="std std-ref">filter_metadata</span></a>
is passed as an opaque <code class="docutils literal notranslate"><span class="pre">protobuf::Struct</span></code>.</p>
<p>Please note that this field exclusively applies to the gRPC ext_authz service and has no effect on the HTTP service.</p>
<p>For example, if the <code class="docutils literal notranslate"><span class="pre">jwt_authn</span></code> filter is used and <a class="reference internal" href="../../jwt_authn/v3/config.proto.html#envoy-v3-api-field-extensions-filters-http-jwt-authn-v3-jwtprovider-payload-in-metadata"><span class="std std-ref">payload_in_metadata</span></a> is set,
then the following will pass the jwt payload to the authorization server.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">metadata_context_namespaces</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">envoy.filters.http.jwt_authn</span>
</pre></div>
</div>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-typed-metadata-context-namespaces">
<dt>typed_metadata_context_namespaces</dt><dd><p>(<strong>repeated</strong> <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies a list of metadata namespaces whose values, if present, will be passed to the
ext_authz service. <a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-metadata-typed-filter-metadata"><span class="std std-ref">typed_filter_metadata</span></a>
is passed as a <code class="docutils literal notranslate"><span class="pre">protobuf::Any</span></code>.</p>
<p>Please note that this field exclusively applies to the gRPC ext_authz service and has no effect on the HTTP service.</p>
<p>It works in a way similar to <code class="docutils literal notranslate"><span class="pre">metadata_context_namespaces</span></code> but allows Envoy and ext_authz server to share
the protobuf message definition in order to do a safe parsing.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-route-metadata-context-namespaces">
<dt>route_metadata_context_namespaces</dt><dd><p>(<strong>repeated</strong> <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies a list of route metadata namespaces whose values, if present, will be passed to the
ext_authz service at <a class="reference internal" href="../../../../../service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-route-metadata-context"><span class="std std-ref">route_metadata_context</span></a> in
<a class="reference internal" href="../../../../../service/auth/v3/external_auth.proto.html#envoy-v3-api-field-service-auth-v3-checkrequest-attributes"><span class="std std-ref">CheckRequest</span></a>.
<a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-metadata-filter-metadata"><span class="std std-ref">filter_metadata</span></a> is passed as an opaque <code class="docutils literal notranslate"><span class="pre">protobuf::Struct</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-route-typed-metadata-context-namespaces">
<dt>route_typed_metadata_context_namespaces</dt><dd><p>(<strong>repeated</strong> <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies a list of route metadata namespaces whose values, if present, will be passed to the
ext_authz service at <a class="reference internal" href="../../../../../service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-route-metadata-context"><span class="std std-ref">route_metadata_context</span></a> in
<a class="reference internal" href="../../../../../service/auth/v3/external_auth.proto.html#envoy-v3-api-field-service-auth-v3-checkrequest-attributes"><span class="std std-ref">CheckRequest</span></a>.
<a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-metadata-typed-filter-metadata"><span class="std std-ref">typed_filter_metadata</span></a> is passed as an <code class="docutils literal notranslate"><span class="pre">protobuf::Any</span></code>.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-filter-enabled">
<dt>filter_enabled</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-runtimefractionalpercent"><span class="std std-ref">config.core.v3.RuntimeFractionalPercent</span></a>) Specifies if the filter is enabled.</p>
<p>If <a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-runtimefractionalpercent-runtime-key"><span class="std std-ref">runtime_key</span></a> is specified,
Envoy will lookup the runtime key to get the percentage of requests to filter.</p>
<p>If this field is not specified, the filter will be enabled for all requests.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-filter-enabled-metadata">
<dt>filter_enabled_metadata</dt><dd><p>(<a class="reference internal" href="../../../../../type/matcher/v3/metadata.proto.html#envoy-v3-api-msg-type-matcher-v3-metadatamatcher"><span class="std std-ref">type.matcher.v3.MetadataMatcher</span></a>) Specifies if the filter is enabled with metadata matcher.
If this field is not specified, the filter will be enabled for all requests.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-deny-at-disable">
<dt>deny_at_disable</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-runtimefeatureflag"><span class="std std-ref">config.core.v3.RuntimeFeatureFlag</span></a>) Specifies whether to deny the requests, when the filter is disabled.
If <a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-runtimefeatureflag-runtime-key"><span class="std std-ref">runtime_key</span></a> is specified,
Envoy will lookup the runtime key to determine whether to deny request for
filter protected path at filter disabling. If filter is disabled in
typed_per_filter_config for the path, requests will not be denied.</p>
<p>If this field is not specified, all requests will be allowed when disabled.</p>
<p>If a request is denied due to this setting, the response code in <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-status-on-error"><span class="std std-ref">status_on_error</span></a> will
be returned.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-include-peer-certificate">
<dt>include_peer_certificate</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Specifies if the peer certificate is sent to the external service.</p>
<p>When this field is true, Envoy will include the peer X.509 certificate, if available, in the
<a class="reference internal" href="../../../../../service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-peer-certificate"><span class="std std-ref">certificate</span></a>.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-stat-prefix">
<dt>stat_prefix</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Optional additional prefix to use when emitting statistics. This allows to distinguish
emitted statistics between configured <code class="docutils literal notranslate"><span class="pre">ext_authz</span></code> filters in an HTTP filter chain. For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">http_filters</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">envoy.filters.http.ext_authz</span>
<span class="w">    </span><span class="nt">typed_config</span><span class="p">:</span>
<span class="w">      </span><span class="s">&quot;@type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">type.googleapis.com/envoy.extensions.filters.http.ext_authz.v3.ExtAuthz</span>
<span class="w">      </span><span class="nt">stat_prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">waf</span><span class="w"> </span><span class="c1"># This emits ext_authz.waf.ok, ext_authz.waf.denied, etc.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">envoy.filters.http.ext_authz</span>
<span class="w">    </span><span class="nt">typed_config</span><span class="p">:</span>
<span class="w">      </span><span class="s">&quot;@type&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">type.googleapis.com/envoy.extensions.filters.http.ext_authz.v3.ExtAuthz</span>
<span class="w">      </span><span class="nt">stat_prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">blocker</span><span class="w"> </span><span class="c1"># This emits ext_authz.blocker.ok, ext_authz.blocker.denied, etc.</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-bootstrap-metadata-labels-key">
<dt>bootstrap_metadata_labels_key</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Optional labels that will be passed to <a class="reference internal" href="../../../../../service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-peer-labels"><span class="std std-ref">labels</span></a> in
<a class="reference internal" href="../../../../../service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-destination"><span class="std std-ref">destination</span></a>.
The labels will be read from <a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-node"><span class="std std-ref">metadata</span></a> with the specified key.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-allowed-headers">
<dt>allowed_headers</dt><dd><p>(<a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">type.matcher.v3.ListStringMatcher</span></a>) Check request to authorization server will include the client request headers that have a correspondent match
in the <a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">list</span></a>. If this option isn’t specified, then
all client request headers are included in the check request to a gRPC authorization server, whereas no client request headers
(besides the ones allowed by default - see note below) are included in the check request to an HTTP authorization server.
This inconsistency between gRPC and HTTP servers is to maintain backwards compatibility with legacy behavior.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>For requests to an HTTP authorization server: in addition to the the user’s supplied matchers, <code class="docutils literal notranslate"><span class="pre">Host</span></code>, <code class="docutils literal notranslate"><span class="pre">Method</span></code>, <code class="docutils literal notranslate"><span class="pre">Path</span></code>,
<code class="docutils literal notranslate"><span class="pre">Content-Length</span></code>, and <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> are <strong>additionally included</strong> in the list.</p></li>
</ol>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>2. For requests to an HTTP authorization server: <em>Content-Length</em> will be set to 0 and the request to the
authorization server will not have a message body. However, the check request can include the buffered
client request body (controlled by <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-with-request-body"><span class="std std-ref">with_request_body</span></a> setting),
consequently the value of <em>Content-Length</em> of the authorization request reflects the size of
its payload size.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>3. This can be overridden by the field <code class="docutils literal notranslate"><span class="pre">disallowed_headers</span></code> below. That is, if a header
matches for both <code class="docutils literal notranslate"><span class="pre">allowed_headers</span></code> and <code class="docutils literal notranslate"><span class="pre">disallowed_headers</span></code>, the header will NOT be sent.</p>
</div>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-disallowed-headers">
<dt>disallowed_headers</dt><dd><p>(<a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">type.matcher.v3.ListStringMatcher</span></a>) If set, specifically disallow any header in this list to be forwarded to the external
authentication server. This overrides the above <code class="docutils literal notranslate"><span class="pre">allowed_headers</span></code> if a header matches both.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-include-tls-session">
<dt>include_tls_session</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Specifies if the TLS session level details like SNI are sent to the external service.</p>
<p>When this field is true, Envoy will include the SNI name used for TLSClientHello, if available, in the
<a class="reference internal" href="../../../../../service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-tls-session"><span class="std std-ref">tls_session</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-charge-cluster-response-stats">
<dt>charge_cluster_response_stats</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) Whether to increment cluster statistics (e.g. cluster.&lt;cluster_name&gt;.upstream_rq_*) on authorization failure.
Defaults to true.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-encode-raw-headers">
<dt>encode_raw_headers</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Whether to encode the raw headers (i.e. unsanitized values &amp; unconcatenated multi-line headers)
in authentication request. Works with both HTTP and GRPC clients.</p>
<p>When this is set to true, header values are not sanitized. Headers with the same key will also
not be combined into a single, comma-separated header.
Requests to GRPC services will populate the field
<a class="reference internal" href="../../../../../service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-httprequest-header-map"><span class="std std-ref">header_map</span></a>.
Requests to HTTP services will be constructed with the unsanitized header values and preserved
multi-line headers with the same key.</p>
<p>If this field is set to false, header values will be sanitized, with any non-UTF-8-compliant
bytes replaced with ‘!’. Headers with the same key will have their values concatenated into a
single comma-separated header value.
Requests to GRPC services will populate the field
<a class="reference internal" href="../../../../../service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-httprequest-headers"><span class="std std-ref">headers</span></a>.
Requests to HTTP services will have their header values sanitized and will not preserve
multi-line headers with the same key.</p>
<p>It’s recommended you set this to true unless you already rely on the old behavior. False is the
default only for backwards compatibility.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-decoder-header-mutation-rules">
<dt>decoder_header_mutation_rules</dt><dd><p>(<a class="reference internal" href="../../../../../config/common/mutation_rules/v3/mutation_rules.proto.html#envoy-v3-api-msg-config-common-mutation-rules-v3-headermutationrules"><span class="std std-ref">config.common.mutation_rules.v3.HeaderMutationRules</span></a>) Rules for what modifications an ext_authz server may make to the request headers before
continuing decoding / forwarding upstream.</p>
<p>If set to anything, enables header mutation checking against configured rules. Note that
<a class="reference internal" href="../../../../../config/common/mutation_rules/v3/mutation_rules.proto.html#envoy-v3-api-msg-config-common-mutation-rules-v3-headermutationrules"><span class="std std-ref">HeaderMutationRules</span></a>
has defaults that change ext_authz behavior. Also note that if this field is set to anything,
ext_authz can no longer append to :-prefixed headers.</p>
<p>If empty, header mutation rule checking is completely disabled.</p>
<p>Regardless of what is configured here, ext_authz cannot remove :-prefixed headers.</p>
<p>This field and <code class="docutils literal notranslate"><span class="pre">validate_mutations</span></code> have different use cases. <code class="docutils literal notranslate"><span class="pre">validate_mutations</span></code> enables
correctness checks for all header / query parameter mutations (e.g. for invalid characters).
This field allows the filter to reject mutations to specific headers.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-enable-dynamic-metadata-ingestion">
<dt>enable_dynamic_metadata_ingestion</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) Enable / disable ingestion of dynamic metadata from ext_authz service.</p>
<p>If false, the filter will ignore dynamic metadata injected by the ext_authz service. If the
ext_authz service tries injecting dynamic metadata, the filter will log, increment the
<code class="docutils literal notranslate"><span class="pre">ignored_dynamic_metadata</span></code> stat, then continue handling the response.</p>
<p>If true, the filter will ingest dynamic metadata entries as normal.</p>
<p>If unset, defaults to true.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-filter-metadata">
<dt>filter_metadata</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#struct">Struct</a>) Additional metadata to be added to the filter state for logging purposes. The metadata will be
added to StreamInfo’s filter state under the namespace corresponding to the ext_authz filter
name.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-emit-filter-state-stats">
<dt>emit_filter_state_stats</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) When set to true, the filter will emit per-stream stats for access logging. The filter state
key will be the same as the filter name.</p>
<p>If using Envoy GRPC, emits latency, bytes sent / received, upstream info, and upstream cluster
info. If not using Envoy GRPC, emits only latency. Note that stats are ONLY added to filter
state if a check request is actually made to an ext_authz service.</p>
<p>If this is false the filter will not emit stats, but filter_metadata will still be respected if
it has a value.</p>
</dd>
</dl>
</section>
<section id="extensions-filters-http-ext-authz-v3-buffersettings">
<span id="envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-buffersettings"></span><h2>extensions.filters.http.ext_authz.v3.BufferSettings<a class="headerlink" href="#extensions-filters-http-ext-authz-v3-buffersettings" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.7/api/envoy/extensions/filters/http/ext_authz/v3/ext_authz.proto#L312">[extensions.filters.http.ext_authz.v3.BufferSettings proto]</a></p>
<p>Configuration for buffering the request data.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;max_request_bytes&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;allow_partial_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;pack_as_bytes&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-buffersettings-max-request-bytes">
<dt>max_request_bytes</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) Sets the maximum size of a message body that the filter will hold in memory. Envoy will return
<code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">413</span></code> and will <em>not</em> initiate the authorization process when buffer reaches the number
set in this field. Note that this setting will have precedence over <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-failure-mode-allow"><span class="std std-ref">failure_mode_allow</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-buffersettings-allow-partial-message">
<dt>allow_partial_message</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) When this field is true, Envoy will buffer the message until <code class="docutils literal notranslate"><span class="pre">max_request_bytes</span></code> is reached.
The authorization request will be dispatched and no 413 HTTP error will be returned by the
filter.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-buffersettings-pack-as-bytes">
<dt>pack_as_bytes</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) If true, the body sent to the external authorization service is set with raw bytes, it sets
the <a class="reference internal" href="../../../../../service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-httprequest-raw-body"><span class="std std-ref">raw_body</span></a>
field of HTTP request attribute context. Otherwise, <a class="reference internal" href="../../../../../service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-httprequest-body"><span class="std std-ref">body</span></a> will be filled
with UTF-8 string request body.</p>
<p>This field only affects configurations using a <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-grpc-service"><span class="std std-ref">grpc_service</span></a>. In configurations that use
an <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-http-service"><span class="std std-ref">http_service</span></a>, this
has no effect.</p>
</dd>
</dl>
</section>
<section id="extensions-filters-http-ext-authz-v3-httpservice">
<span id="envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-httpservice"></span><h2>extensions.filters.http.ext_authz.v3.HttpService<a class="headerlink" href="#extensions-filters-http-ext-authz-v3-httpservice" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.7/api/envoy/extensions/filters/http/ext_authz/v3/ext_authz.proto#L368">[extensions.filters.http.ext_authz.v3.HttpService proto]</a></p>
<p>HttpService is used for raw HTTP communication between the filter and the authorization service.
When configured, the filter will parse the client request and use these attributes to call the
authorization server. Depending on the response, the filter may reject or accept the client
request. Note that in any of these events, metadata can be added, removed or overridden by the
filter:</p>
<p><em>On authorization request</em>, a list of allowed request headers may be supplied. See
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationrequest-allowed-headers"><span class="std std-ref">allowed_headers</span></a>
for details. Additional headers metadata may be added to the authorization request. See
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationrequest-headers-to-add"><span class="std std-ref">headers_to_add</span></a> for
details.</p>
<p>On authorization response status HTTP 200 OK, the filter will allow traffic to the upstream and
additional headers metadata may be added to the original client request. See
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationresponse-allowed-upstream-headers"><span class="std std-ref">allowed_upstream_headers</span></a>
for details. Additionally, the filter may add additional headers to the client’s response. See
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationresponse-allowed-client-headers-on-success"><span class="std std-ref">allowed_client_headers_on_success</span></a>
for details.</p>
<p>On other authorization response statuses, the filter will not allow traffic. Additional headers
metadata as well as body may be added to the client’s response. See <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationresponse-allowed-client-headers"><span class="std std-ref">allowed_client_headers</span></a>
for details.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;server_uri&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;path_prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;authorization_request&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;authorization_response&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-httpservice-server-uri">
<dt>server_uri</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/http_uri.proto.html#envoy-v3-api-msg-config-core-v3-httpuri"><span class="std std-ref">config.core.v3.HttpUri</span></a>) Sets the HTTP server URI which the authorization requests must be sent to.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-httpservice-path-prefix">
<dt>path_prefix</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Sets a prefix to the value of authorization request header <code class="docutils literal notranslate"><span class="pre">Path</span></code>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-httpservice-authorization-request">
<dt>authorization_request</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-authorizationrequest"><span class="std std-ref">extensions.filters.http.ext_authz.v3.AuthorizationRequest</span></a>) Settings used for controlling authorization request metadata.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-httpservice-authorization-response">
<dt>authorization_response</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-authorizationresponse"><span class="std std-ref">extensions.filters.http.ext_authz.v3.AuthorizationResponse</span></a>) Settings used for controlling authorization response metadata.</p>
</dd>
</dl>
</section>
<section id="extensions-filters-http-ext-authz-v3-authorizationrequest">
<span id="envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-authorizationrequest"></span><h2>extensions.filters.http.ext_authz.v3.AuthorizationRequest<a class="headerlink" href="#extensions-filters-http-ext-authz-v3-authorizationrequest" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.7/api/envoy/extensions/filters/http/ext_authz/v3/ext_authz.proto#L387">[extensions.filters.http.ext_authz.v3.AuthorizationRequest proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;allowed_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;headers_to_add&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationrequest-allowed-headers">
<dt>allowed_headers</dt><dd><p>(<a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">type.matcher.v3.ListStringMatcher</span></a>) Authorization request includes the client request headers that have a correspondent match
in the <a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">list</span></a>.
This field has been deprecated in favor of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-allowed-headers"><span class="std std-ref">allowed_headers</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In addition to the the user’s supplied matchers, <code class="docutils literal notranslate"><span class="pre">Host</span></code>, <code class="docutils literal notranslate"><span class="pre">Method</span></code>, <code class="docutils literal notranslate"><span class="pre">Path</span></code>,
<code class="docutils literal notranslate"><span class="pre">Content-Length</span></code>, and <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> are <strong>automatically included</strong> to the list.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code> header is set to <code class="docutils literal notranslate"><span class="pre">0</span></code> and the request to the authorization
service has no message body. However, the authorization request <em>may</em> include the buffered
client request body (controlled by <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-with-request-body"><span class="std std-ref">with_request_body</span></a>
setting) hence the value of its <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code> reflects the size of its payload size.</p>
</div>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationrequest-headers-to-add">
<dt>headers_to_add</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-headervalue"><span class="std std-ref">config.core.v3.HeaderValue</span></a>) Sets a list of headers that will be included to the request to authorization service. Note that
client request of the same key will be overridden.</p>
</dd>
</dl>
</section>
<section id="extensions-filters-http-ext-authz-v3-authorizationresponse">
<span id="envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-authorizationresponse"></span><h2>extensions.filters.http.ext_authz.v3.AuthorizationResponse<a class="headerlink" href="#extensions-filters-http-ext-authz-v3-authorizationresponse" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.7/api/envoy/extensions/filters/http/ext_authz/v3/ext_authz.proto#L418">[extensions.filters.http.ext_authz.v3.AuthorizationResponse proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;allowed_upstream_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;allowed_upstream_headers_to_append&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;allowed_client_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;allowed_client_headers_on_success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;dynamic_metadata_from_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationresponse-allowed-upstream-headers">
<dt>allowed_upstream_headers</dt><dd><p>(<a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">type.matcher.v3.ListStringMatcher</span></a>) When this <a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">list</span></a> is set, authorization
response headers that have a correspondent match will be added to the original client request.
Note that coexistent headers will be overridden.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationresponse-allowed-upstream-headers-to-append">
<dt>allowed_upstream_headers_to_append</dt><dd><p>(<a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">type.matcher.v3.ListStringMatcher</span></a>) When this <a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">list</span></a> is set, authorization
response headers that have a correspondent match will be added to the original client request.
Note that coexistent headers will be appended.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationresponse-allowed-client-headers">
<dt>allowed_client_headers</dt><dd><p>(<a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">type.matcher.v3.ListStringMatcher</span></a>) When this <a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">list</span></a> is set, authorization
response headers that have a correspondent match will be added to the client’s response. Note
that when this list is <em>not</em> set, all the authorization response headers, except <code class="docutils literal notranslate"><span class="pre">Authority</span>
<span class="pre">(Host)</span></code> will be in the response to the client. When a header is included in this list, <code class="docutils literal notranslate"><span class="pre">Path</span></code>,
<code class="docutils literal notranslate"><span class="pre">Status</span></code>, <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code>, <code class="docutils literal notranslate"><span class="pre">WWWAuthenticate</span></code> and <code class="docutils literal notranslate"><span class="pre">Location</span></code> are automatically added.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationresponse-allowed-client-headers-on-success">
<dt>allowed_client_headers_on_success</dt><dd><p>(<a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">type.matcher.v3.ListStringMatcher</span></a>) When this <a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">list</span></a> is set, authorization
response headers that have a correspondent match will be added to the client’s response when
the authorization response itself is successful, i.e. not failed or denied. When this list is
<em>not</em> set, no additional headers will be added to the client’s response on success.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-authorizationresponse-dynamic-metadata-from-headers">
<dt>dynamic_metadata_from_headers</dt><dd><p>(<a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">type.matcher.v3.ListStringMatcher</span></a>) When this <a class="reference internal" href="../../../../../type/matcher/v3/string.proto.html#envoy-v3-api-msg-type-matcher-v3-liststringmatcher"><span class="std std-ref">list</span></a> is set, authorization
response headers that have a correspondent match will be emitted as dynamic metadata to be consumed
by the next filter. This metadata lives in a namespace specified by the canonical name of extension filter
that requires it:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../../../../configuration/http/http_filters/ext_authz_filter.html#config-http-filters-ext-authz-dynamic-metadata"><span class="std std-ref">envoy.filters.http.ext_authz</span></a> for HTTP filter.</p></li>
<li><p><a class="reference internal" href="../../../../../../configuration/listeners/network_filters/ext_authz_filter.html#config-network-filters-ext-authz-dynamic-metadata"><span class="std std-ref">envoy.filters.network.ext_authz</span></a> for network filter.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="extensions-filters-http-ext-authz-v3-extauthzperroute">
<span id="envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-extauthzperroute"></span><h2>extensions.filters.http.ext_authz.v3.ExtAuthzPerRoute<a class="headerlink" href="#extensions-filters-http-ext-authz-v3-extauthzperroute" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.7/api/envoy/extensions/filters/http/ext_authz/v3/ext_authz.proto#L456">[extensions.filters.http.ext_authz.v3.ExtAuthzPerRoute proto]</a></p>
<p>Extra settings on a per virtualhost/route/weighted-cluster level.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;disabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;check_settings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthzperroute-disabled">
<dt>disabled</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Disable the ext auth filter for this particular vhost or route.
If disabled is specified in multiple per-filter-configs, the most specific one will be used.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthzperroute-disabled"><span class="std std-ref">disabled</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthzperroute-check-settings"><span class="std std-ref">check_settings</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthzperroute-check-settings">
<dt>check_settings</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-checksettings"><span class="std std-ref">extensions.filters.http.ext_authz.v3.CheckSettings</span></a>) Check request settings for this route.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthzperroute-disabled"><span class="std std-ref">disabled</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthzperroute-check-settings"><span class="std std-ref">check_settings</span></a> must be set.</p>
</dd>
</dl>
</section>
<section id="extensions-filters-http-ext-authz-v3-checksettings">
<span id="envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-checksettings"></span><h2>extensions.filters.http.ext_authz.v3.CheckSettings<a class="headerlink" href="#extensions-filters-http-ext-authz-v3-checksettings" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.7/api/envoy/extensions/filters/http/ext_authz/v3/ext_authz.proto#L473">[extensions.filters.http.ext_authz.v3.CheckSettings proto]</a></p>
<p>Extra settings for the check request.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;context_extensions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;disable_request_body_buffering&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;with_request_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-checksettings-context-extensions">
<dt>context_extensions</dt><dd><p>(<strong>repeated</strong> map&lt;<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>&gt;) Context extensions to set on the CheckRequest’s
<a class="reference internal" href="../../../../../service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-context-extensions"><span class="std std-ref">AttributeContext.context_extensions</span></a></p>
<p>You can use this to provide extra context for the external authorization server on specific
virtual hosts/routes. For example, adding a context extension on the virtual host level can
give the ext-authz server information on what virtual host is used without needing to parse the
host header. If CheckSettings is specified in multiple per-filter-configs, they will be merged
in order, and the result will be used.</p>
<p>Merge semantics for this field are such that keys from more specific configs override.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These settings are only applied to a filter configured with a
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-grpc-service"><span class="std std-ref">grpc_service</span></a>.</p>
</div>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-checksettings-disable-request-body-buffering">
<dt>disable_request_body_buffering</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) When set to true, disable the configured <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-with-request-body"><span class="std std-ref">with_request_body</span></a> for a specific route.</p>
<p>Please note that only one of <em>disable_request_body_buffering</em> or
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-checksettings-with-request-body"><span class="std std-ref">with_request_body</span></a>
may be specified.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-ext-authz-v3-checksettings-with-request-body">
<dt>with_request_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-ext-authz-v3-buffersettings"><span class="std std-ref">extensions.filters.http.ext_authz.v3.BufferSettings</span></a>) Enable or override request body buffering, which is configured using the
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-with-request-body"><span class="std std-ref">with_request_body</span></a>
option for a specific route.</p>
<p>Please note that only only one of <em>with_request_body</em> or
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-checksettings-disable-request-body-buffering"><span class="std std-ref">disable_request_body_buffering</span></a>
may be specified.</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../dynamo/v3/dynamo.proto.html" class="btn btn-neutral float-left" title="Dynamo (proto)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../ext_proc/v3/ext_proc.proto.html" class="btn btn-neutral float-right" title="External Processing Filter (proto)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2025, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>