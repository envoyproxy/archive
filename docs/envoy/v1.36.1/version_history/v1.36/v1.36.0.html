

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.36.0 (October 14, 2025) &mdash; envoy tag-v1.36.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d7d10ef0" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/envoy.css?v=3ec0219e" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4da122e5" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=0a5a9fed"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=db7b0edf"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="v1.35" href="../v1.35/v1.35.html" />
    <link rel="prev" title="1.36.1 (October 16, 2025)" href="v1.36.1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../version_history.html">Version history</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../version_history.html#stable-versions">Stable versions</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="v1.36.html">v1.36: 1.36.1 (October 16, 2025)</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="v1.36.1.html">1.36.1 (October 16, 2025)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">1.36.0 (October 14, 2025)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../v1.35/v1.35.html">v1.35: 1.35.5 (October 16, 2025)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.34/v1.34.html">v1.34: 1.34.9 (October 15, 2025)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.33/v1.33.html">v1.33: 1.33.11 (October 15, 2025)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#archived-versions">Archived versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#deprecation-policy">Deprecation Policy</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../version_history.html">Version history</a></li>
          <li class="breadcrumb-item"><a href="v1.36.html">v1.36</a></li>
      <li class="breadcrumb-item active">1.36.0 (October 14, 2025)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/version_history/v1.36/v1.36.0.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="october-14-2025">
<span id="version-history-1-36-0"></span><h1>1.36.0 (October 14, 2025)<a class="headerlink" href="#october-14-2025" title="Link to this heading"></a></h1>
<section id="incompatible-behavior-changes">
<h2>Incompatible behavior changes<a class="headerlink" href="#incompatible-behavior-changes" title="Link to this heading"></a></h2>
<p><em>Changes that are expected to cause an incompatibility if applicable; deployment changes are likely required</em></p>
<ul class="simple">
<li><p><strong>ext_proc</strong>: Reverted <a class="reference external" href="https://github.com/envoyproxy/envoy/pull/39740">#39740</a> to re-enable <code class="docutils literal notranslate"><span class="pre">fail_open</span></code> +
<code class="docutils literal notranslate"><span class="pre">FULL_DUPLEX_STREAMED</span></code> configuration combination.</p></li>
<li><p><strong>http</strong>: A route refresh will now result in a tracing refresh. The trace sampling decision and decoration
of the new route will be applied to the active span.
This change can be reverted by setting the runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.trace_refresh_after_route_refresh</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.
Note, if <a class="reference internal" href="../../api-v3/extensions/request_id/uuid/v3/uuid.proto.html#envoy-v3-api-field-extensions-request-id-uuid-v3-uuidrequestidconfig-pack-trace-reason"><span class="std std-ref">pack_trace_reason</span></a> is set
to <code class="docutils literal notranslate"><span class="pre">true</span></code> (it is <code class="docutils literal notranslate"><span class="pre">true</span></code> by default), a request marked as traced cannot be unmarked as traced
after the tracing refresh.</p></li>
<li><p><strong>http2</strong>: The default value for the <a class="reference internal" href="../../api-v3/config/core/v3/protocol.proto.html#envoy-v3-api-field-config-core-v3-http2protocoloptions-max-concurrent-streams"><span class="std std-ref">maximum number of concurrent streams in HTTP/2</span></a>
has been changed from 2147483647 to 1024.
The default value for the <a class="reference internal" href="../../api-v3/config/core/v3/protocol.proto.html#envoy-v3-api-field-config-core-v3-http2protocoloptions-initial-stream-window-size"><span class="std std-ref">initial stream window size in HTTP/2</span></a>
has been changed from 256MiB to 16MiB.
The default value for the <a class="reference internal" href="../../api-v3/config/core/v3/protocol.proto.html#envoy-v3-api-field-config-core-v3-http2protocoloptions-initial-connection-window-size"><span class="std std-ref">initial connection window size in HTTP/2</span></a>
has been changed from 256MiB to 24MiB.
This change could be reverted temporarily by
setting the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.safe_http2_options</span></code>
to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>http_11_proxy</strong>: HTTP/1.1 proxy transport socket now generates RFC 9110 compliant <code class="docutils literal notranslate"><span class="pre">CONNECT</span></code> requests that include a <code class="docutils literal notranslate"><span class="pre">Host</span></code> header by default.
When proxy address is configured via endpoint metadata, the transport socket now prefers hostname:port format over IP:port
when hostname is available. The legacy behavior (<code class="docutils literal notranslate"><span class="pre">CONNECT</span></code> without <code class="docutils literal notranslate"><span class="pre">Host</span></code> header) can be restored by setting the runtime flag
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http_11_proxy_connect_legacy_format</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><strong>load balancing</strong>: Moved locality WRR structures out of <code class="docutils literal notranslate"><span class="pre">HostSetImpl</span></code> and into a separate class. Locality WRR schedulers are now by default owned
and constructed by the underlying Zone Aware LB, instead of owned and constructed by the Host Set. There should be no visible
behavior change for existing users of Zone Aware LBs.</p></li>
<li><p><strong>response_decoder</strong>: Updated <code class="docutils literal notranslate"><span class="pre">EnvoyQuicClientStream</span></code> and <code class="docutils literal notranslate"><span class="pre">ResponseDecoderWrapper</span></code> to use a handle to access the response decoder
to prevent use-after-free errors by ensuring the decoder instance is still live before calling its methods.
This change is guarded by the runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.use_response_decoder_handle</span></code>.</p></li>
</ul>
</section>
<section id="minor-behavior-changes">
<h2>Minor behavior changes<a class="headerlink" href="#minor-behavior-changes" title="Link to this heading"></a></h2>
<p><em>Changes that may cause incompatibilities for some users, but should not for most</em></p>
<ul class="simple">
<li><p><strong>dns_filter</strong>: Honor the default DNS resolver configuration in the bootstrap config
<a class="reference internal" href="../../api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-bootstrap-typed-dns-resolver-config"><span class="std std-ref">typed_dns_resolver_config</span></a> if the
<a class="reference internal" href="../../api-v3/extensions/filters/udp/dns_filter/v3/dns_filter.proto.html#envoy-v3-api-field-extensions-filters-udp-dns-filter-v3-dnsfilterconfig-client-config"><span class="std std-ref">client_config</span></a> is empty.</p></li>
<li><p><strong>ext_authz</strong>: Check the request header count after applying mutations is &lt;= the configured limit and reject
the response if not.</p></li>
<li><p><strong>ext_proc</strong>: If <a class="reference internal" href="../../api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-failure-mode-allow"><span class="std std-ref">failure_mode_allow</span></a> is <code class="docutils literal notranslate"><span class="pre">true</span></code>,
save the gRPC failure status code returned from the ext_proc server in the filter state.
Previously, all fail-open cases would return <code class="docutils literal notranslate"><span class="pre">call_status</span></code> <code class="docutils literal notranslate"><span class="pre">Grpc::Status::Aborted</span></code>.</p></li>
<li><p><strong>formatter</strong>: Deprecated legacy header formatter support for <code class="docutils literal notranslate"><span class="pre">%DYNAMIC_METADATA([&quot;namespace&quot;,</span> <span class="pre">&quot;key&quot;,</span> <span class="pre">...])%</span></code>,
<code class="docutils literal notranslate"><span class="pre">%UPSTREAM_METADATA([&quot;namespace&quot;,</span> <span class="pre">&quot;key&quot;,</span> <span class="pre">...])%</span></code> and <code class="docutils literal notranslate"><span class="pre">%PER_REQUEST_STATE(key)%</span></code>. Please use
<code class="docutils literal notranslate"><span class="pre">%DYNAMIC_METADATA(namespace:key:...])%</span></code>, <code class="docutils literal notranslate"><span class="pre">%UPSTREAM_METADATA(namespace:key:...])%</span></code>
and <code class="docutils literal notranslate"><span class="pre">%FILTER_STATE(key:PLAIN)%</span></code> as alternatives.
This change is guarded by the runtime flag
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.remove_legacy_route_formatter</span></code> and default to <code class="docutils literal notranslate"><span class="pre">false</span></code> for now
and will be flipped to <code class="docutils literal notranslate"><span class="pre">true</span></code> after two release periods.</p></li>
<li><p><strong>generic_proxy</strong>: Generic proxy codec adds the same buffer limit as the connection buffer limit. If the buffer limit is
exceeded, the connection is disconnected. This behavior can be reverted by setting the runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.generic_proxy_codec_buffer_limit</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>grpc_json_transcoder</strong>: Cap the frame size for streamed gRPC at 1MB. Without this change there was a small chance
that if a request streamed in sufficiently faster than it was processed, a frame larger than
4MB could be encoded, which most upstream gRPC services would, by default, treat as an error.</p></li>
<li><p><strong>http</strong>: Added accounting for decompressed HTTP header bytes sent and received. Existing stats only count wire-encoded header bytes.
This can be accessed through the <code class="docutils literal notranslate"><span class="pre">%UPSTREAM_DECOMPRESSED_HEADER_BYTES_RECEIVED%</span></code>,
<code class="docutils literal notranslate"><span class="pre">%DOWNSTREAM_DECOMPRESSED_HEADER_BYTES_RECEIVED%</span></code>, <code class="docutils literal notranslate"><span class="pre">%UPSTREAM_DECOMPRESSED_HEADER_BYTES_SENT%</span></code>, and
<code class="docutils literal notranslate"><span class="pre">%DOWNSTREAM_DECOMPRESSED_HEADER_BYTES_SENT%</span></code> access log command operators.</p></li>
<li><p><strong>http3</strong>: Turned off HTTP/3 happy eyeballs in upstream via the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http3_happy_eyeballs</span></code>.
It was found to favor TCP over QUIC when UDP does not work on IPv6 but works on IPv4.</p></li>
<li><p><strong>mobile</strong>: Explicitly drain connections upon network change events regardless of whether the DNS cache is refreshed or not.
This behavior can be reverted by setting the runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.decouple_explicit_drain_pools_and_dns_refresh</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>oauth2</strong>: Added response code details to <code class="docutils literal notranslate"><span class="pre">401</span></code> local responses generated by the OAuth2 filter.</p></li>
<li><p><strong>router</strong>: Take into account connection-level metadata under the <code class="docutils literal notranslate"><span class="pre">envoy.lb</span></code> namespace when computing subset load balancing matches.</p></li>
<li><p><strong>tap</strong>: Previously, streamed trace buffered data was only flushed when it reached the configured size.
If the threshold was never met, the data remained buffered until the connection was closed.
With this change, buffered data will be flushed proactively. Specifically, if the buffer does not
reach the configured size but has been held for more than 15 seconds, it will be sent immediately.</p></li>
<li><p><strong>testing</strong>: In test code for external extensions, matchers <code class="docutils literal notranslate"><span class="pre">Http::HeaderValueOf</span></code>, <code class="docutils literal notranslate"><span class="pre">HasHeader</span></code>, and <code class="docutils literal notranslate"><span class="pre">HeaderHasValueRef</span></code>
must be replaced with <code class="docutils literal notranslate"><span class="pre">ContainsHeader</span></code>.
Any uses of matcher <code class="docutils literal notranslate"><span class="pre">HeaderHasValue(...)</span></code> should be replaced with <code class="docutils literal notranslate"><span class="pre">::testing::Pointee(ContainsHeader(...))</span></code>.</p></li>
<li><p><strong>thrift</strong>: <a class="reference internal" href="../../api-v3/extensions/filters/http/thrift_to_metadata/v3/thrift_to_metadata.proto.html#envoy-v3-api-field-extensions-filters-http-thrift-to-metadata-v3-rule-field-selector"><span class="std std-ref">field_selector</span></a>
takes precedence over <a class="reference internal" href="../../api-v3/extensions/filters/http/thrift_to_metadata/v3/thrift_to_metadata.proto.html#envoy-v3-api-field-extensions-filters-http-thrift-to-metadata-v3-rule-field"><span class="std std-ref">field</span></a>
if both set. Not that <a class="reference internal" href="../../api-v3/extensions/filters/http/thrift_to_metadata/v3/thrift_to_metadata.proto.html#envoy-v3-api-field-extensions-filters-http-thrift-to-metadata-v3-rule-field-selector"><span class="std std-ref">field_selector</span></a>
was in WIP status.</p></li>
<li><p><strong>websocket</strong>: Allow <code class="docutils literal notranslate"><span class="pre">4xx</span></code> and <code class="docutils literal notranslate"><span class="pre">5xx</span></code> to go through the filter chain for the WebSocket handshake response check. This behavior can be
disabled by the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.websocket_allow_4xx_5xx_through_filter_chain</span></code>.</p></li>
<li><p><strong>websocket</strong>: Support route and per-try timeouts on WebSocket upgrade. This can be disabled by the runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.websocket_enable_timeout_on_upgrade_response</span></code>.</p></li>
</ul>
</section>
<section id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Link to this heading"></a></h2>
<p><em>Changes expected to improve the state of the world and are unlikely to have negative effects</em></p>
<ul class="simple">
<li><p><strong>aws</strong>: Added missing session name, session duration, and <code class="docutils literal notranslate"><span class="pre">external_id</span></code> parameters in <code class="docutils literal notranslate"><span class="pre">AssumeRole</span></code> credentials provider.</p></li>
<li><p><strong>dns</strong>: Fixed a use-after-free (UAF) in DNS cache that can occur when the <code class="docutils literal notranslate"><span class="pre">Host</span></code> header is modified between the Dynamic
Forwarding Proxy and Router filters.</p></li>
<li><p><strong>formatter</strong>: Fixed a bug where the <code class="docutils literal notranslate"><span class="pre">%TRACE_ID%</span></code> command cannot work properly at the header mutations.</p></li>
<li><p><strong>geoip</strong>: Fixed a bug in the MaxMind provider where the <code class="docutils literal notranslate"><span class="pre">found_entry</span></code> field in the lookup result was not checked before
trying to populate headers with data. If this field is not checked the provider could try to populate headers
with wrong data, as per the documentation for the MaxMind library
<a class="reference external" href="https://github.com/maxmind/libmaxminddb/blob/main/doc/libmaxminddb.md#mmdb_lookup_result_s">libmaxminddb.md</a>.</p></li>
<li><p><strong>http</strong>: Fixed a bug where premature resets of streams could result in recursive draining and a potential
stack overflow. Setting a proper <code class="docutils literal notranslate"><span class="pre">max_concurrent_streams</span></code> value for HTTP/2 or HTTP/3 could eliminate
the risk of a stack overflow before this fix.</p></li>
<li><p><strong>http</strong>: Fixed a bug where the <code class="docutils literal notranslate"><span class="pre">response_headers_to_add</span></code> may be processed multiple times for the local responses from
the router filter.</p></li>
<li><p><strong>http3</strong>: Fixed a bug where the access log was skipped for HTTP/3 requests when the stream was half closed. This behavior can be
reverted by setting the runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.quic_fix_defer_logging_miss_for_half_closed_stream</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>listener</strong>: Fixed a bug where a failure to create listener sockets in different Linux network namespaces was
not handled properly. The success of the netns switch was not checked before attempting to
access the result of the socket creation. This is only relevant for Linux and if a listening
socket address was specified with a non-default network namespace.</p></li>
<li><p><strong>listener</strong>: Fixed a bug where comparing listeners did not consider the network namespace they were listening in.</p></li>
<li><p><strong>listeners</strong>: Fixed an issue where <a class="reference internal" href="../../configuration/listeners/listener_filters/tls_inspector.html#config-listener-filters-tls-inspector"><span class="std std-ref">TLS inspector listener filter</span></a> timed out
when used with other listener filters. The bug was triggered when a previous listener filter processed more data
than the TLS inspector had requested, causing the TLS inspector to incorrectly calculate its buffer growth strategy.
The fix ensures that buffer growth is now based on actual bytes available rather than the previously requested amount.</p></li>
<li><p><strong>load_balancing</strong>: Fixed a bug in <code class="docutils literal notranslate"><span class="pre">ClientSideWeightedRoundRobinLoadBalancer</span></code> with worker lbs iterating over priorities
included in owning thread aware lb priority set that might have different number of priorities.</p></li>
<li><p><strong>oauth2</strong>: Fixed a bug introduced in PR <a class="reference external" href="https://github.com/envoyproxy/envoy/pull/40228">#40228</a>, where OAuth2 cookies were
removed for requests matching the <code class="docutils literal notranslate"><span class="pre">pass_through_matcher</span></code> configuration. This broke setups with multiple OAuth2
filter instances using different <code class="docutils literal notranslate"><span class="pre">pass_through_matcher</span></code> configurations, because the first matching instance removed
the OAuth2 cookies - even when a passthrough was intended - impacting subsequent filters that still needed those cookies.</p></li>
<li><p><strong>oauth2</strong>: Fixed an issue where cookies prefixed with <code class="docutils literal notranslate"><span class="pre">__Secure-</span></code> or <code class="docutils literal notranslate"><span class="pre">__Host-</span></code> were not receiving a
<code class="docutils literal notranslate"><span class="pre">Secure</span></code> attribute.</p></li>
<li><p><strong>odcds</strong>: Fixed a bug where using OD-CDS without <code class="docutils literal notranslate"><span class="pre">cds_config</span></code> would not work in some
cases. This change introduces a new internal OD-CDS component. This change
could be reverted temporarily by setting the runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.odcds_over_ads_fix</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>release</strong>: Fixed the distroless image to ensure nonroot.</p></li>
<li><p><strong>stats</strong>: Fixed a bug where the metric name <code class="docutils literal notranslate"><span class="pre">expiration_unix_time_seconds</span></code> of
<code class="docutils literal notranslate"><span class="pre">cluster.&lt;cluster_name&gt;.ssl.certificate.&lt;cert_name&gt;.&lt;metric_name&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">listener.&lt;address&gt;.ssl.certificate.&lt;cert_name&gt;.&lt;metric_name&gt;</span></code>
was not being properly extracted in the final Prometheus stat name.</p></li>
<li><p><strong>tcp_proxy</strong>: Fixed a bug where when a downstream TCP connection is created and the upstream connection is not fully established, no idle timeout
is set on the downstream connection, which may lead to a connection leak if the client does not close the connection.
The fix is to set an idle timeout on the downstream connection immediately after creation.
This fix can be reverted by setting the runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.tcp_proxy_set_idle_timer_immediately_on_new_connection</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>tls_inspector</strong>: Fixed regression in tls_inspector that caused plain text connections to be closed if more than 16Kb is read at once.
This behavior can be reverted by setting the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.tls_inspector_no_length_check_on_error</span></code>
to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>udp_proxy</strong>: Fixed a crash in the UDP proxy that occurred during <code class="docutils literal notranslate"><span class="pre">ENVOY_SIGTERM</span></code> when active tunneling sessions were present.</p></li>
</ul>
</section>
<section id="removed-config-or-runtime">
<h2>Removed config or runtime<a class="headerlink" href="#removed-config-or-runtime" title="Link to this heading"></a></h2>
<p><em>Normally occurs at the end of the</em> <a class="reference internal" href="../version_history.html#deprecated"><span class="std std-ref">deprecation period</span></a></p>
<ul class="simple">
<li><p><strong>balsa</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.wait_for_first_byte_before_balsa_msg_done</span></code> and legacy code paths.</p></li>
<li><p><strong>dfp</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.dfp_fail_on_empty_host_header</span></code> and legacy code paths.</p></li>
<li><p><strong>dispatcher</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.restart_features.fix_dispatcher_approximate_now</span></code> and legacy code paths.</p></li>
<li><p><strong>dns</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.prefer_ipv6_dns_on_macos</span></code> and legacy code paths.</p></li>
<li><p><strong>dns_resolver</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.getaddrinfo_num_retries</span></code> and legacy code paths.</p></li>
<li><p><strong>dynamic_forward_proxy</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.avoid_dfp_cluster_removal_on_cds_update</span></code> and legacy code paths.</p></li>
<li><p><strong>gcp_authn</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.gcp_authn_use_fixed_url</span></code> and legacy code paths.</p></li>
<li><p><strong>geoip_providers</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.mmdb_files_reload_enabled</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.allow_alt_svc_for_ips</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.filter_chain_aborted_can_not_continue</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.local_reply_traverses_filter_chain_after_1xx</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.proxy_104</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.proxy_status_mapping_more_core_response_flags</span></code> and legacy code paths.</p></li>
<li><p><strong>http</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.use_filter_manager_state_for_downstream_end_stream</span></code> and legacy code paths.</p></li>
<li><p><strong>http3</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http3_remove_empty_trailers</span></code> and legacy code paths.</p></li>
<li><p><strong>http_connection_manager</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.explicit_internal_address_config</span></code> and legacy code paths.</p></li>
<li><p><strong>jwt_authn</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.jwt_authn_remove_jwt_from_query_params</span></code> and legacy code paths.</p></li>
<li><p><strong>jwt_authn</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.jwt_authn_validate_uri</span></code> and legacy code paths.</p></li>
<li><p><strong>network</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.udp_socket_apply_aggregated_read_limit</span></code> and legacy code paths.</p></li>
<li><p><strong>oauth2</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.oauth2_use_refresh_token</span></code> and legacy code paths.</p></li>
<li><p><strong>proxy_filter</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.proxy_ssl_port</span></code> and legacy code paths.</p></li>
<li><p><strong>proxy_protocol</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.use_typed_metadata_in_proxy_protocol_listener</span></code> and legacy code paths.</p></li>
<li><p><strong>quic</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.prefer_quic_client_udp_gro</span></code> and legacy code paths.</p></li>
<li><p><strong>quic</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.report_stream_reset_error_code</span></code> and legacy code paths.</p></li>
<li><p><strong>rds</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.normalize_rds_provider_config</span></code> and legacy code paths.</p></li>
<li><p><strong>router</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.shadow_policy_inherit_trace_sampling</span></code> and legacy code paths.</p></li>
<li><p><strong>router</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.streaming_shadow</span></code> and legacy code paths.</p></li>
<li><p><strong>stats</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.enable_include_histograms</span></code> and legacy code paths.</p></li>
<li><p><strong>udp_proxy</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.enable_udp_proxy_outlier_detection</span></code> and legacy code paths.</p></li>
<li><p><strong>upstream</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.use_config_in_happy_eyeballs</span></code> and legacy code paths.</p></li>
<li><p><strong>xds</strong>: Removed runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.xds_prevent_resource_copy</span></code> and legacy code paths.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New features<a class="headerlink" href="#new-features" title="Link to this heading"></a></h2>
<ul>
<li><p><strong>cel</strong>: Added a new <code class="docutils literal notranslate"><span class="pre">%TYPED_CEL%</span></code> formatter command that, unlike <code class="docutils literal notranslate"><span class="pre">%CEL%</span></code>, can output non-string values (number, boolean, null, etc.)
when used in formatting contexts that accept non-string values, such as
<a class="reference internal" href="../../api-v3/config/core/v3/substitution_format_string.proto.html#envoy-v3-api-field-config-core-v3-substitutionformatstring-json-format"><span class="std std-ref">json_format</span></a>. The new command is introduced
so as to not break compatibility with the existing command’s behavior.</p></li>
<li><p><strong>composite</strong>: Allow the composite filter to be configured to insert a filter into the filter chain outside of the decode headers lifecycle phase.</p></li>
<li><p><strong>compressor</strong>: Added <a class="reference internal" href="../../api-v3/extensions/filters/http/compressor/v3/compressor.proto.html#envoy-v3-api-field-extensions-filters-http-compressor-v3-compressor-responsedirectionconfig-status-header-enabled"><span class="std std-ref">status_header_enabled</span></a>
to the <a class="reference internal" href="../../configuration/http/http_filters/compressor_filter.html#config-http-filters-compressor"><span class="std std-ref">compressor filter</span></a>. When enabled, it adds a new response header
<code class="docutils literal notranslate"><span class="pre">x-envoy-compression-status</span></code> to the <a class="reference internal" href="../../configuration/http/http_filters/compressor_filter.html#config-http-filters-compressor"><span class="std std-ref">compressor filter</span></a>.
This header provides information on whether the response was compressed and, if not, the reason why compression was skipped.
Enabling this feature updates the order of conditions checked within the <a class="reference internal" href="../../configuration/http/http_filters/compressor_filter.html#config-http-filters-compressor"><span class="std std-ref">compressor filter</span></a>
to emit the most appropriate status reason.</p></li>
<li><p><strong>dns_filter, redis_proxy and prefix_matcher_map</strong>: Switch to using Radix Tree instead of Trie for performance improvements.</p></li>
<li><p><strong>dns_resolver</strong>: Added <a class="reference internal" href="../../api-v3/extensions/network/dns_resolver/cares/v3/cares_dns_resolver.proto.html#envoy-v3-api-field-extensions-network-dns-resolver-cares-v3-caresdnsresolverconfig-max-udp-channel-duration"><span class="std std-ref">max_udp_channel_duration</span></a>
configuration field to the c-ares DNS resolver. This allows periodic refresh of the UDP channel
to help avoid stale socket states and provide better load distribution across UDP ports.</p></li>
<li><p><strong>dynamic_modules</strong>: Added a new Logging ABI that allows modules to emit logs in the standard Envoy logging stream under <code class="docutils literal notranslate"><span class="pre">dynamic_modules</span></code> ID.
In the Rust SDK, they are available as <code class="docutils literal notranslate"><span class="pre">envoy_log_info</span></code>, etc.</p></li>
<li><p><strong>dynamic_modules</strong>: Added support for counters, gauges, histograms, and their vector variants to the dynamic modules API.</p></li>
<li><p><strong>ext_authz</strong>: Added
<a class="reference internal" href="../../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-max-denied-response-body-bytes"><span class="std std-ref">max_denied_response_body_bytes</span></a>
to the ext_authz HTTP filter. This allows configuring the maximum size of the response body
returned to the downstream client when a request is denied by the external authorization service.
If the authorization server returns a response body larger than this limit, it will be truncated.</p></li>
<li><p><strong>ext_authz</strong>: Added
<a class="reference internal" href="../../api-v3/extensions/filters/network/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-network-ext-authz-v3-extauthz-send-tls-alert-on-denial"><span class="std std-ref">send_tls_alert_on_denial</span></a>
to the network <code class="docutils literal notranslate"><span class="pre">ext_authz</span></code> filter. When enabled, the filter sends a TLS <code class="docutils literal notranslate"><span class="pre">access_denied(49)</span></code> alert
before closing the connection when authorization is denied.</p></li>
<li><p><strong>ext_authz</strong>: Added support for per-route gRPC service override in the <code class="docutils literal notranslate"><span class="pre">ext_authz</span></code> HTTP filter. This allows different routes
to use different external authorization backends by configuring a
<a class="reference internal" href="../../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-checksettings-grpc-service"><span class="std std-ref">grpc_service</span></a>
in the per-route <code class="docutils literal notranslate"><span class="pre">check_settings</span></code>. Routes without this configuration continue to use the default
authorization service.</p></li>
<li><p><strong>ext_authz</strong>: Added support for retry policy in the ext_authz HTTP filter. The filter now supports
<a class="reference internal" href="../../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-httpservice-retry-policy"><span class="std std-ref">retry_policy</span></a>
configuration for HTTP authorization servers. When configured, failed requests to the authorization server
will be automatically retried according to the specified policy.</p></li>
<li><p><strong>ext_proc</strong>: Added <a class="reference internal" href="../../api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-status-on-error"><span class="std std-ref">status_on_error</span></a>
to the <code class="docutils literal notranslate"><span class="pre">ext_proc</span></code> HTTP filter. This allows configuring the HTTP status code returned to the downstream
client when communication with the external processor fails (e.g., gRPC error). Previously, these cases returned a
fixed <code class="docutils literal notranslate"><span class="pre">500</span></code>.</p></li>
<li><p><strong>ext_proc</strong>: Introduced a new
<a class="reference internal" href="../../api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-processing-request-modifier"><span class="std std-ref">ProcessingRequestModifier</span></a>
config and corresponding interface to enable modifying the <code class="docutils literal notranslate"><span class="pre">ProcessingRequest</span></code> before it is sent on the wire. Sample use cases include
modifying attribute and metadata keys to abstract away filter details. If the config is not set, then there is no behavior change.
Supports per-route overrides.</p></li>
<li><p><strong>geoip</strong>: Added a new metric <code class="docutils literal notranslate"><span class="pre">db_build_epoch</span></code> to track the build timestamp of the MaxMind geolocation database files.
This can be used to monitor the freshness of the databases currently in use by the filter.
See <a class="reference external" href="https://maxmind.github.io/MaxMind-DB/#build_epoch">MaxMind-DB build_epoch</a> for more details.</p></li>
<li><p><strong>header_to_metadata</strong>: Added optional statistics collection for the Header-To-Metadata filter. When the <a class="reference internal" href="../../api-v3/extensions/filters/http/header_to_metadata/v3/header_to_metadata.proto.html#envoy-v3-api-field-extensions-filters-http-header-to-metadata-v3-config-stat-prefix"><span class="std std-ref">stat_prefix</span></a> field is configured,
the filter emits detailed counters for rule processing, metadata operations, etc. See
<a class="reference internal" href="../../configuration/http/http_filters/header_to_metadata_filter.html#config-http-filters-header-to-metadata"><span class="std std-ref">Header-To-Metadata filter statistics</span></a> for details.</p></li>
<li><p><strong>health_check</strong>: Added support for request payloads in HTTP health checks. The <code class="docutils literal notranslate"><span class="pre">send</span></code> field in <code class="docutils literal notranslate"><span class="pre">HttpHealthCheck</span></code> can now be
used to specify a request body to be sent during health checking. This feature supports both hex-encoded text
and binary payloads, similar to TCP health checks. The payload can only be used with HTTP methods that support
request bodies (<code class="docutils literal notranslate"><span class="pre">POST</span></code>, <code class="docutils literal notranslate"><span class="pre">PUT</span></code>, <code class="docutils literal notranslate"><span class="pre">PATCH</span></code>, <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code>). Methods that must not have request bodies
(<code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>, <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>, <code class="docutils literal notranslate"><span class="pre">TRACE</span></code>) are validated and will throw an error if combined with payloads.
The implementation is optimized to process the payload once during configuration and reuse it for all health
check requests. See <a class="reference internal" href="../../api-v3/config/core/v3/health_check.proto.html#envoy-v3-api-msg-config-core-v3-healthcheck-httphealthcheck"><span class="std std-ref">HttpHealthCheck</span></a> for configuration details.</p></li>
<li><p><strong>http</strong>: Added
<a class="reference internal" href="../../api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-stream-flush-timeout"><span class="std std-ref">stream_flush_timeout</span></a>
to allow for configuring a stream flush timeout independently from the stream idle timeout.</p></li>
<li><p><strong>http</strong>: Added <code class="docutils literal notranslate"><span class="pre">setUpstreamOverrideHost</span></code> method to AsyncClient StreamOptions to enable direct host routing
that bypasses load balancer selection.</p></li>
<li><p><strong>http</strong>: Added <code class="docutils literal notranslate"><span class="pre">upstream_rq_per_cx</span></code> histogram to track requests per connection for monitoring connection reuse efficiency.</p></li>
<li><p><strong>http</strong>: Added statistics to the <a class="reference internal" href="../../configuration/http/http_filters/stateful_session_filter.html#config-http-filters-stateful-session"><span class="std std-ref">Stateful session filter</span></a>
to help operators understand routing outcomes when session overrides are requested. The filter now
emits counters in the <code class="docutils literal notranslate"><span class="pre">http.&lt;stat_prefix&gt;.stateful_session.[&lt;filter_stat_prefix&gt;.]</span></code> namespace. An
optional per-filter <a class="reference internal" href="../../api-v3/extensions/filters/http/stateful_session/v3/stateful_session.proto.html#envoy-v3-api-field-extensions-filters-http-stateful-session-v3-statefulsession-stat-prefix"><span class="std std-ref">stat_prefix</span></a> can be used
to disambiguate multiple instances.</p></li>
<li><p><strong>http</strong>: Added support for header removal based on header key matching. The new
<a class="reference internal" href="../../api-v3/config/common/mutation_rules/v3/mutation_rules.proto.html#envoy-v3-api-field-config-common-mutation-rules-v3-headermutation-remove-on-match"><span class="std std-ref">remove_on_match</span></a>
allows removing headers that match a specified key pattern. This enables more flexible and
dynamic header manipulation based on header names.</p></li>
<li><p><strong>http</strong>: Added support for per-route compressor library override in the <a class="reference internal" href="../../configuration/http/http_filters/compressor_filter.html#config-http-filters-compressor"><span class="std std-ref">compressor filter</span></a>.
Routes can now specify a different compressor library (e.g., gzip, brotli) via the
<a class="reference internal" href="../../api-v3/extensions/filters/http/compressor/v3/compressor.proto.html#envoy-v3-api-field-extensions-filters-http-compressor-v3-compressoroverrides-compressor-library"><span class="std std-ref">compressor_library</span></a>
field in the per-route configuration. This allows different routes to use different
compression algorithms and settings while maintaining the same filter configuration.</p></li>
<li><p><strong>load_reporting</strong>: Added support for endpoint-level load stats and metrics reporting. Locality load reports now include per
endpoint statistics and metrics, but only for endpoints with updated stats, optimizing report size and efficiency.</p></li>
<li><p><strong>lua</strong>: Added <code class="docutils literal notranslate"><span class="pre">route()</span></code> to the Stream handle API, allowing Lua scripts to retrieve route information. So far, the only method
implemented is <code class="docutils literal notranslate"><span class="pre">metadata()</span></code>, allowing Lua scripts to access route metadata scoped to the specific filter name. See
<a class="reference internal" href="../../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-route-wrapper"><span class="std std-ref">Route object API</span></a> for more details.</p></li>
<li><p><strong>lua</strong>: Added <code class="docutils literal notranslate"><span class="pre">virtualHost()</span></code> to the Stream handle API, allowing Lua scripts to retrieve virtual host information. So far, the only method
implemented is <code class="docutils literal notranslate"><span class="pre">metadata()</span></code>, allowing Lua scripts to access virtual host metadata scoped to the specific filter name. See
<a class="reference internal" href="../../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-virtual-host-wrapper"><span class="std std-ref">Virtual host object API</span></a> for more details.</p></li>
<li><p><strong>lua</strong>: Added a new <code class="docutils literal notranslate"><span class="pre">filterState()</span></code> to <code class="docutils literal notranslate"><span class="pre">streamInfo()</span></code> which provides access to filter state objects stored during request processing.
This allows Lua scripts to retrieve string, boolean, and numeric values stored by various filters for use in routing decisions,
header modifications, and other processing logic. See <a class="reference internal" href="../../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-stream-info-filter-state-wrapper"><span class="std std-ref">Filter State API</span></a>
for more details.</p></li>
<li><p><strong>matching</strong>: Added <a class="reference internal" href="../../api-v3/extensions/matching/common_inputs/network/v3/network_inputs.proto.html#envoy-v3-api-msg-extensions-matching-common-inputs-network-v3-networknamespaceinput"><span class="std std-ref">NetworkNamespaceInput</span></a> to the
matcher framework. This input returns the listener address’s <code class="docutils literal notranslate"><span class="pre">network_namespace_filepath</span></code>
for use with <a class="reference internal" href="../../api-v3/config/listener/v3/listener.proto.html#envoy-v3-api-field-config-listener-v3-listener-filter-chain-matcher"><span class="std std-ref">filter_chain_matcher</span></a>, enabling filter chain
selection based on the Linux network namespace of the bound socket. On non-Linux platforms,
the input returns an empty value and connections use the default filter chain.</p></li>
<li><p><strong>oauth2</strong>: Added <a class="reference internal" href="../../api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-disable-token-encryption"><span class="std std-ref">disable_token_encryption</span></a> option to the OAuth2 filter to
store ID and access tokens without encryption when running in trusted environments.</p></li>
<li><p><strong>observability</strong>: Added <code class="docutils literal notranslate"><span class="pre">ENVOY_NOTIFICATION</span></code> macro to track specific conditions in production environments.</p></li>
<li><p><strong>otlp_stat_sink</strong>: Added support for <a class="reference internal" href="../../api-v3/extensions/stat_sinks/open_telemetry/v3/open_telemetry.proto.html#envoy-v3-api-field-extensions-stat-sinks-open-telemetry-v3-sinkconfig-custom-metric-conversions"><span class="std std-ref">custom_metric_conversions</span></a>. This allows renaming stats,
adding static labels, and aggregating multiple stats into generated metrics.</p></li>
<li><p><strong>otlp_stat_sink</strong>: Added support for resource attributes. The stat sink will use the resource attributes configured for the OpenTelemetry tracer via
<a class="reference internal" href="../../api-v3/config/trace/v3/opentelemetry.proto.html#envoy-v3-api-field-config-trace-v3-opentelemetryconfig-resource-detectors"><span class="std std-ref">resource_detectors</span></a>.</p></li>
<li><p><strong>outlier detection</strong>: Added <a class="reference internal" href="../../api-v3/extensions/upstreams/http/v3/http_protocol_options.proto.html#envoy-v3-api-field-extensions-upstreams-http-v3-httpprotocoloptions-outlier-detection"><span class="std std-ref">outlier_detection</span></a>
to cluster’s http protocol options to allow defining via an http matcher whether a response should be treated
as error or as success by outlier detection.</p></li>
<li><p><strong>overload management</strong>: Added a new scaled timer type <code class="docutils literal notranslate"><span class="pre">HttpDownstreamStreamFlush</span></code> to the overload manager. This allows
Envoy to scale the periodic timer for flushing downstream responses based on resource pressure.
The new timer can be configured via the
<a class="reference internal" href="../../api-v3/config/overload/v3/overload.proto.html#envoy-v3-api-msg-config-overload-v3-scaletimersoverloadactionconfig"><span class="std std-ref">ScaleTimersOverloadActionConfig</span></a>.</p></li>
<li><p><strong>overload management</strong>: Added load shed point <code class="docutils literal notranslate"><span class="pre">envoy.load_shed_points.http2_server_go_away_and_close_on_dispatch</span></code>
that sends <code class="docutils literal notranslate"><span class="pre">GOAWAY</span></code> and closes connections for HTTP/2 server processing of requests. When
a <code class="docutils literal notranslate"><span class="pre">GOAWAY</span></code> frame is submitted by this load shed point, the counter <code class="docutils literal notranslate"><span class="pre">http2.goaway_sent</span></code> will be
incremented.</p></li>
<li><p><strong>quic</strong>: Added new option to support <a class="reference internal" href="../../api-v3/extensions/quic/connection_id_generator/quic_lb/v3/quic_lb.proto.html#envoy-v3-api-field-extensions-quic-connection-id-generator-quic-lb-v3-config-server-id-base64-encoded"><span class="std std-ref">base64 encoded server ID</span></a>
in QUIC-LB.</p></li>
<li><p><strong>ratelimit</strong>: Added the <a class="reference internal" href="../../api-v3/extensions/filters/http/ratelimit/v3/rate_limit.proto.html#envoy-v3-api-field-extensions-filters-http-ratelimit-v3-ratelimit-rate-limits"><span class="std std-ref">rate_limits</span></a>
field to generate rate limit descriptors. If this field is set, the
<a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-virtualhost-rate-limits"><span class="std std-ref">VirtualHost.rate_limits</span></a> or
<a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-routeaction-rate-limits"><span class="std std-ref">RouteAction.rate_limits</span></a> fields will be ignored. However,
<a class="reference internal" href="../../api-v3/extensions/filters/http/ratelimit/v3/rate_limit.proto.html#envoy-v3-api-field-extensions-filters-http-ratelimit-v3-ratelimitperroute-rate-limits"><span class="std std-ref">RateLimitPerRoute.rate_limits</span></a>
will take precedence over this field.</p></li>
<li><p><strong>ratelimit</strong>: Enhanced the rate limit filter to support substitution formatters for descriptors that generated
at the stream complete phase. Before this change, substitution formatters at the stream complete
phase cannot work because rate limit filter does not provide the necessary context.</p></li>
<li><p><strong>rbac</strong>: Enabled use of <a class="reference internal" href="../../api-v3/extensions/matching/common_inputs/network/v3/network_inputs.proto.html#envoy-v3-api-msg-extensions-matching-common-inputs-network-v3-networknamespaceinput"><span class="std std-ref">NetworkNamespaceInput</span></a> in the
network RBAC filter’s matcher. This allows RBAC policies to evaluate the Linux network namespace
of the listening socket via the generic matcher API.</p></li>
<li><p><strong>rbac</strong>: Enabled use of <a class="reference internal" href="../../api-v3/extensions/matching/common_inputs/network/v3/network_inputs.proto.html#envoy-v3-api-msg-extensions-matching-common-inputs-network-v3-networknamespaceinput"><span class="std std-ref">NetworkNamespaceInput</span></a> in the
network and HTTP RBAC filters’ matchers. This allows RBAC policies to evaluate the Linux network
namespace of the listening socket via the generic matcher API.</p></li>
<li><p><strong>rbac</strong>: Switched the IP matcher to use LC-Trie for performance improvements.</p></li>
<li><p><strong>redis</strong>: Added support for thirty-three new Redis commands including <code class="docutils literal notranslate"><span class="pre">COPY</span></code>, <code class="docutils literal notranslate"><span class="pre">RPOPLPUSH</span></code>, <code class="docutils literal notranslate"><span class="pre">SMOVE</span></code>, <code class="docutils literal notranslate"><span class="pre">SUNION</span></code>, <code class="docutils literal notranslate"><span class="pre">SDIFF</span></code>,
<code class="docutils literal notranslate"><span class="pre">SINTER</span></code>, <code class="docutils literal notranslate"><span class="pre">SINTERSTORE</span></code>, <code class="docutils literal notranslate"><span class="pre">ZUNIONSTORE</span></code>, <code class="docutils literal notranslate"><span class="pre">ZINTERSTORE</span></code>, <code class="docutils literal notranslate"><span class="pre">PFMERGE</span></code>, <code class="docutils literal notranslate"><span class="pre">GEORADIUS</span></code>, <code class="docutils literal notranslate"><span class="pre">GEORADIUSBYMEMBER</span></code>,
<code class="docutils literal notranslate"><span class="pre">RENAME</span></code>, <code class="docutils literal notranslate"><span class="pre">SORT</span></code>, <code class="docutils literal notranslate"><span class="pre">SORT_RO</span></code>, <code class="docutils literal notranslate"><span class="pre">ZMSCORE</span></code>, <code class="docutils literal notranslate"><span class="pre">SDIFFSTORE</span></code>, <code class="docutils literal notranslate"><span class="pre">MSETNX</span></code>, <code class="docutils literal notranslate"><span class="pre">SUBSTR</span></code>, <code class="docutils literal notranslate"><span class="pre">ZRANGESTORE</span></code>, <code class="docutils literal notranslate"><span class="pre">ZUNION</span></code>,
<code class="docutils literal notranslate"><span class="pre">ZDIFF</span></code>, <code class="docutils literal notranslate"><span class="pre">SUNIONSTORE</span></code>, <code class="docutils literal notranslate"><span class="pre">SMISMEMBER</span></code>, <code class="docutils literal notranslate"><span class="pre">HRANDFIELD</span></code>, <code class="docutils literal notranslate"><span class="pre">GEOSEARCHSTORE</span></code>, <code class="docutils literal notranslate"><span class="pre">ZDIFFSTORE</span></code>, <code class="docutils literal notranslate"><span class="pre">ZINTER</span></code>, <code class="docutils literal notranslate"><span class="pre">ZRANDMEMBER</span></code>,
<code class="docutils literal notranslate"><span class="pre">BITOP</span></code>, <code class="docutils literal notranslate"><span class="pre">LPOS</span></code>, <code class="docutils literal notranslate"><span class="pre">RENAMENX</span></code>.</p></li>
<li><p><strong>reverse_tunnel</strong>: Added support for reverse tunnels that enable establishing persistent connections from downstream Envoy
instances to upstream Envoy instances without requiring the upstream to be directly reachable. This feature
is particularly useful when downstream instances are behind NATs, firewalls, or in private networks. The
feature is experimental and under active development, but is ready for experimental use. See
<a class="reference internal" href="../../configuration/other_features/reverse_tunnel.html#overview-reverse-tunnel"><span class="std std-ref">reverse tunnel overview</span></a> for details.</p></li>
<li><p><strong>router</strong>: Added <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-virtualhost-request-body-buffer-limit"><span class="std std-ref">request_body_buffer_limit</span></a> and
<a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-route-request-body-buffer-limit"><span class="std std-ref">request_body_buffer_limit</span></a> configuration fields
to enable buffering of large request bodies beyond connection buffer limits.</p></li>
<li><p><strong>router</strong>: Added <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-weightedcluster-use-hash-policy"><span class="std std-ref">use_hash_policy</span></a>
field to <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-msg-config-route-v3-weightedcluster"><span class="std std-ref">WeightedCluster</span></a> to enable
route-level hash policies for weighted cluster selection. When set to <code class="docutils literal notranslate"><span class="pre">true</span></code>,
the existing route-level <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-routeaction-hash-policy"><span class="std std-ref">hash_policy</span></a>
will be used for consistent hashing between weighted clusters, ensuring that requests
with the same hash value (e.g., same session ID, user ID, etc.) will consistently be
routed to the same weighted cluster, enabling session affinity and consistent load
balancing behavior.</p></li>
<li><p><strong>router</strong>: Added support for <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-routeaction-requestmirrorpolicy-request-headers-mutations"><span class="std std-ref">request_headers_mutations</span></a> to enable header
manipulation for mirror requests.
Added support for <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-routeaction-requestmirrorpolicy-host-rewrite-literal"><span class="std std-ref">host_rewrite_literal</span></a> in
<a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-routeaction-request-mirror-policies"><span class="std std-ref">request_mirror_policies</span></a> to enable
host header rewrite for mirror requests.</p></li>
<li><p><strong>router_check_tool</strong>: Added support for testing routes with <a class="reference internal" href="../../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-routematch-dynamic-metadata"><span class="std std-ref">dynamic metadata matchers</span></a>
in the router check tool. The tool now accepts a <code class="docutils literal notranslate"><span class="pre">dynamic_metadata</span></code> field in test input to set metadata
that can be matched by route configuration. This allows comprehensive testing of routes that depend on
dynamic metadata for routing decisions.</p></li>
<li><p><strong>socket</strong>: Added <code class="docutils literal notranslate"><span class="pre">network_namespace_filepath</span></code> to <a class="reference internal" href="../../api-v3/config/core/v3/address.proto.html#envoy-v3-api-msg-config-core-v3-socketaddress"><span class="std std-ref">SocketAddress</span></a>. This field allows
specifying a Linux network namespace filepath for socket creation, enabling network isolation in containerized environments.</p></li>
<li><p><strong>stats</strong>: Added support to remove unused metrics from memory for extensions that
support evictable metrics. This is done <a class="reference internal" href="../../api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-bootstrap-stats-eviction-interval"><span class="std std-ref">periodically</span></a>
during the metric flush.</p></li>
<li><p><strong>tap</strong>: Added <a class="reference internal" href="../../api-v3/extensions/filters/http/tap/v3/tap.proto.html#envoy-v3-api-field-extensions-filters-http-tap-v3-tap-record-upstream-connection"><span class="std std-ref">record_upstream_connection</span></a>
to determine whether upstream connection information is recorded in the HTTP buffer trace output.</p></li>
<li><p><strong>tcp_proxy</strong>: Added <code class="docutils literal notranslate"><span class="pre">max_downstream_connection_duration_jitter_percentage</span></code> to allow adding a jitter to the max downstream connection duration.
This can be used to avoid thundering herd problems with many clients being disconnected and possibly reconnecting at the same time.</p></li>
<li><p><strong>tcp_proxy</strong>: Added configuration to customize the request ID header and dynamic metadata key used when tunneling requests.
Use <a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-tunnelingconfig-request-id-header"><span class="std std-ref">request_id_header</span></a> and
<a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-tunnelingconfig-request-id-metadata-key"><span class="std std-ref">request_id_metadata_key</span></a>.
When unset, the defaults remain <code class="docutils literal notranslate"><span class="pre">x-request-id</span></code> and <code class="docutils literal notranslate"><span class="pre">tunnel_request_id</span></code> respectively.</p></li>
<li><p><strong>tcp_proxy</strong>: Added support for dynamic TLV values in PROXY protocol using <a class="reference internal" href="../../api-v3/config/core/v3/proxy_protocol.proto.html#envoy-v3-api-field-config-core-v3-tlventry-format-string"><span class="std std-ref">format_string</span></a> field. This allows TLV values to be
populated dynamically from stream information using format strings (e.g., <code class="docutils literal notranslate"><span class="pre">%DYNAMIC_METADATA(...)%</span></code>,
<code class="docutils literal notranslate"><span class="pre">%FILTER_STATE(...)%</span></code>, <code class="docutils literal notranslate"><span class="pre">%DOWNSTREAM_REMOTE_ADDRESS%</span></code>).</p></li>
<li><p><strong>tcp_proxy</strong>: Added support for generating and propagating a request ID on synthesized upstream HTTP requests when tunneling requests.
It can be configured using <a class="reference internal" href="../../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-tunnelingconfig-request-id-extension"><span class="std std-ref">request_id_extension</span></a>.</p></li>
<li><p><strong>thrift</strong>: Support <a class="reference internal" href="../../api-v3/extensions/filters/http/thrift_to_metadata/v3/thrift_to_metadata.proto.html#envoy-v3-api-field-extensions-filters-http-thrift-to-metadata-v3-rule-field-selector"><span class="std std-ref">field_selector</span></a>
to extract specified fields in thrift body for thrift_to_metadata http filter.</p></li>
<li><p><strong>tls_inspector</strong>: Added dynamic metadata when failing to parse the <code class="docutils literal notranslate"><span class="pre">ClientHello</span></code>.</p></li>
<li><p><strong>tracing</strong>: Added <a class="reference internal" href="../../api-v3/config/trace/v3/zipkin.proto.html#envoy-v3-api-field-config-trace-v3-zipkinconfig-trace-context-option"><span class="std std-ref">trace_context_option</span></a> enum
in the Zipkin tracer config. When set to <code class="docutils literal notranslate"><span class="pre">USE_B3_WITH_W3C_PROPAGATION</span></code>, the tracer will:
extract trace information from W3C trace headers when B3 headers are not present (downstream),
and inject both B3 and W3C trace headers for upstream requests to maximize compatibility.
The default value <code class="docutils literal notranslate"><span class="pre">USE_B3</span></code> maintains backward compatibility with B3-only behavior.</p></li>
<li><p><strong>tracing</strong>: Enhanced Zipkin tracer with advanced collector configuration via
<a class="reference internal" href="../../api-v3/config/trace/v3/zipkin.proto.html#envoy-v3-api-field-config-trace-v3-zipkinconfig-collector-service"><span class="std std-ref">collector_service</span></a>
using <code class="docutils literal notranslate"><span class="pre">HttpService</span></code>. New features include:</p>
<ol class="arabic simple">
<li><p><strong>Custom HTTP Headers</strong>: Add headers to collector requests for custom metadata, service identification,
and collector-specific routing.</p></li>
<li><p><strong>Full URI Parsing</strong>: The <code class="docutils literal notranslate"><span class="pre">uri</span></code> field now supports both path-only (<code class="docutils literal notranslate"><span class="pre">/api/v2/spans</span></code>) and
full URI formats (<code class="docutils literal notranslate"><span class="pre">https://zipkin-collector.example.com/api/v2/spans</span></code>). When using full URIs,
Envoy automatically extracts hostname and path components - hostname sets the HTTP <code class="docutils literal notranslate"><span class="pre">Host</span></code> header,
and path sets the request path. Path-only URIs fall back to using the cluster name as the hostname.</p></li>
</ol>
<p>When configured, <code class="docutils literal notranslate"><span class="pre">collector_service</span></code> takes precedence over legacy configuration fields (<code class="docutils literal notranslate"><span class="pre">collector_cluster</span></code>,
<code class="docutils literal notranslate"><span class="pre">collector_endpoint</span></code>, <code class="docutils literal notranslate"><span class="pre">collector_hostname</span></code>), which will be deprecated in a future release. Legacy configuration
does not support custom headers or URI parsing.</p>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="v1.36.1.html" class="btn btn-neutral float-left" title="1.36.1 (October 16, 2025)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../v1.35/v1.35.html" class="btn btn-neutral float-right" title="v1.35" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2025, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>