

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>External processing service (proto) &mdash; envoy tag-v1.33.7 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=d7d10ef0" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/envoy.css?v=3ec0219e" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css?v=4da122e5" />

  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=085aee45"></script>
      <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../../_static/copybutton.js?v=db7b0edf"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="gRPC access log service (ALS) (proto)" href="../../accesslog/v3/als.proto.html" />
    <link rel="prev" title="Extension config discovery service (ECDS) (proto)" href="../../extension/v3/config_discovery.proto.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html">
            
              <img src="../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../api.html">v3 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../config/config.html">Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../service.html">Services</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../auth/v3/attribute_context.proto.html">Attribute context (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../auth/v3/external_auth.proto.html">Authorization service (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../status/v3/csds.proto.html">Client status discovery service (CSDS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extension/v3/config_discovery.proto.html">Extension config discovery service (ECDS) (proto)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">External processing service (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../accesslog/v3/als.proto.html">gRPC access log service (ALS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../health/v3/hds.proto.html">Health discovery service (HDS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../load_stats/v3/lrs.proto.html">Load reporting service (LRS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metrics/v3/metrics_service.proto.html">Metrics service (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ratelimit/v3/rls.proto.html">Rate limit service (RLS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../rate_limit_quota/v3/rlqs.proto.html">Rate Limit Quota Service (RLQS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../runtime/v3/rtds.proto.html">Runtime discovery service (RTDS) (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../config/tap/v3/common.proto.html">Tap common configuration (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tap/v3/tap.proto.html">Tap sink service (proto)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../redis_auth/v3/redis_external_auth.proto.html">Redis external authentication service (proto)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../common_messages/common_messages_xds.html">Common messages (XDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../version_history/version_history.html">Version history</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../api/api.html">API</a></li>
          <li class="breadcrumb-item"><a href="../../../api.html">v3 API reference</a></li>
          <li class="breadcrumb-item"><a href="../../service.html">Services</a></li>
      <li class="breadcrumb-item active">External processing service (proto)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/api-v3/service/ext_proc/v3/external_processor.proto.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="external-processing-service-proto">
<span id="envoy-v3-api-file-envoy-service-ext-proc-v3-external-processor-proto"></span><h1>External processing service (proto)<a class="headerlink" href="#external-processing-service-proto" title="Link to this heading"></a></h1>
<section id="service-ext-proc-v3-processingrequest">
<span id="envoy-v3-api-msg-service-ext-proc-v3-processingrequest"></span><h2>service.ext_proc.v3.ProcessingRequest<a class="headerlink" href="#service-ext-proc-v3-processingrequest" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L59">[service.ext_proc.v3.ProcessingRequest proto]</a></p>
<p>This represents the different types of messages that Envoy can send
to an external processing server.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;request_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;request_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;request_trailers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_trailers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;metadata_context&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;attributes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;observability_mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers">
<dt>request_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httpheaders"><span class="std std-ref">service.ext_proc.v3.HttpHeaders</span></a>) Information about the HTTP request headers, as well as peer info and additional
properties. Unless <code class="docutils literal notranslate"><span class="pre">observability_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the server must send back a
HeaderResponse message, an ImmediateResponse message, or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers">
<dt>response_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httpheaders"><span class="std std-ref">service.ext_proc.v3.HttpHeaders</span></a>) Information about the HTTP response headers, as well as peer info and additional
properties. Unless <code class="docutils literal notranslate"><span class="pre">observability_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the server must send back a
HeaderResponse message or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body">
<dt>request_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httpbody"><span class="std std-ref">service.ext_proc.v3.HttpBody</span></a>) A chunk of the HTTP request body. Unless <code class="docutils literal notranslate"><span class="pre">observability_mode</span></code> is true, the server must send back
a BodyResponse message, an ImmediateResponse message, or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body">
<dt>response_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httpbody"><span class="std std-ref">service.ext_proc.v3.HttpBody</span></a>) A chunk of the HTTP response body. Unless <code class="docutils literal notranslate"><span class="pre">observability_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the server must send back
a BodyResponse message or close the stream.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers">
<dt>request_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httptrailers"><span class="std std-ref">service.ext_proc.v3.HttpTrailers</span></a>) The HTTP trailers for the request path. Unless <code class="docutils literal notranslate"><span class="pre">observability_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the server
must send back a TrailerResponse message or close the stream.</p>
<p>This message is only sent if the trailers processing mode is set to <code class="docutils literal notranslate"><span class="pre">SEND</span></code> and
the original downstream request has trailers.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers">
<dt>response_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-httptrailers"><span class="std std-ref">service.ext_proc.v3.HttpTrailers</span></a>) The HTTP trailers for the response path. Unless <code class="docutils literal notranslate"><span class="pre">observability_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the server
must send back a TrailerResponse message or close the stream.</p>
<p>This message is only sent if the trailers processing mode is set to <code class="docutils literal notranslate"><span class="pre">SEND</span></code> and
the original upstream response has trailers.</p>
<p>Each request message will include one of the following sub-messages. Which
ones are set for a particular HTTP request/response depend on the
processing mode.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingrequest-response-trailers"><span class="std std-ref">response_trailers</span></a> must be set.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-metadata-context">
<dt>metadata_context</dt><dd><p>(<a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-metadata"><span class="std std-ref">config.core.v3.Metadata</span></a>) Dynamic metadata associated with the request.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-attributes">
<dt>attributes</dt><dd><p>(<strong>repeated</strong> map&lt;<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#struct">Struct</a>&gt;) The values of properties selected by the <code class="docutils literal notranslate"><span class="pre">request_attributes</span></code>
or <code class="docutils literal notranslate"><span class="pre">response_attributes</span></code> list in the configuration. Each entry
in the list is populated from the standard
<a class="reference internal" href="../../../../intro/arch_overview/advanced/attributes.html#arch-overview-attributes"><span class="std std-ref">attributes</span></a> supported across Envoy.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-processingrequest-observability-mode">
<dt>observability_mode</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Specify whether the filter that sent this request is running in <a class="reference internal" href="../../../extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-observability-mode"><span class="std std-ref">observability_mode</span></a>
and defaults to false.</p>
<ul class="simple">
<li><p>A value of <code class="docutils literal notranslate"><span class="pre">false</span></code> indicates that the server must respond
to this message by either sending back a matching ProcessingResponse message,
or by closing the stream.</p></li>
<li><p>A value of <code class="docutils literal notranslate"><span class="pre">true</span></code> indicates that the server should not respond to this message, as any
responses will be ignored. However, it may still close the stream to indicate that no more messages
are needed.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-processingresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-processingresponse"></span><h2>service.ext_proc.v3.ProcessingResponse<a class="headerlink" href="#service-ext-proc-v3-processingresponse" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L129">[service.ext_proc.v3.ProcessingResponse proto]</a></p>
<p>For every ProcessingRequest received by the server with the <code class="docutils literal notranslate"><span class="pre">observability_mode</span></code> field
set to false, the server must send back exactly one ProcessingResponse message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;request_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;request_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;request_trailers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_trailers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;immediate_response&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;dynamic_metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;mode_override&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;override_message_timeout&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers">
<dt>request_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-headersresponse"><span class="std std-ref">service.ext_proc.v3.HeadersResponse</span></a>) The server must send back this message in response to a message with the
<code class="docutils literal notranslate"><span class="pre">request_headers</span></code> field set.</p>
<p>The response type that is sent by the server.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers">
<dt>response_headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-headersresponse"><span class="std std-ref">service.ext_proc.v3.HeadersResponse</span></a>) The server must send back this message in response to a message with the
<code class="docutils literal notranslate"><span class="pre">response_headers</span></code> field set.</p>
<p>The response type that is sent by the server.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body">
<dt>request_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-bodyresponse"><span class="std std-ref">service.ext_proc.v3.BodyResponse</span></a>) The server must send back this message in response to a message with
the <code class="docutils literal notranslate"><span class="pre">request_body</span></code> field set.</p>
<p>The response type that is sent by the server.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body">
<dt>response_body</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-bodyresponse"><span class="std std-ref">service.ext_proc.v3.BodyResponse</span></a>) The server must send back this message in response to a message with
the <code class="docutils literal notranslate"><span class="pre">response_body</span></code> field set.</p>
<p>The response type that is sent by the server.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers">
<dt>request_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-trailersresponse"><span class="std std-ref">service.ext_proc.v3.TrailersResponse</span></a>) The server must send back this message in response to a message with
the <code class="docutils literal notranslate"><span class="pre">request_trailers</span></code> field set.</p>
<p>The response type that is sent by the server.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers">
<dt>response_trailers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-trailersresponse"><span class="std std-ref">service.ext_proc.v3.TrailersResponse</span></a>) The server must send back this message in response to a message with
the <code class="docutils literal notranslate"><span class="pre">response_trailers</span></code> field set.</p>
<p>The response type that is sent by the server.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response">
<dt>immediate_response</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-immediateresponse"><span class="std std-ref">service.ext_proc.v3.ImmediateResponse</span></a>) If specified, attempt to create a locally generated response, send it
downstream, and stop processing additional filters and ignore any
additional messages received from the remote server for this request or
response. If a response has already started – for example, if this
message is sent response to a <code class="docutils literal notranslate"><span class="pre">response_body</span></code> message – then
this will either ship the reply directly to the downstream codec,
or reset the stream.</p>
<p>The response type that is sent by the server.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-headers"><span class="std std-ref">response_headers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-body"><span class="std std-ref">request_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-body"><span class="std std-ref">response_body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-request-trailers"><span class="std std-ref">request_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-response-trailers"><span class="std std-ref">response_trailers</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response"><span class="std std-ref">immediate_response</span></a> must be set.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-dynamic-metadata">
<dt>dynamic_metadata</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#struct">Struct</a>) Optional metadata that will be emitted as dynamic metadata to be consumed by
following filters. This metadata will be placed in the namespace(s) specified by the top-level
field name(s) of the struct.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-mode-override">
<dt>mode_override</dt><dd><p>(<a class="reference internal" href="../../../extensions/filters/http/ext_proc/v3/processing_mode.proto.html#envoy-v3-api-msg-extensions-filters-http-ext-proc-v3-processingmode"><span class="std std-ref">extensions.filters.http.ext_proc.v3.ProcessingMode</span></a>) Override how parts of the HTTP request and response are processed
for the duration of this particular request/response only. Servers
may use this to intelligently control how requests are processed
based on the headers and other metadata that they see.
This field is only applicable when servers responding to the header requests.
If it is set in the response to the body or trailer requests, it will be ignored by Envoy.
It is also ignored by Envoy when the ext_proc filter config
<a class="reference internal" href="../../../extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-allow-mode-override"><span class="std std-ref">allow_mode_override</span></a>
is set to false, or
<a class="reference internal" href="../../../extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-send-body-without-waiting-for-header-response"><span class="std std-ref">send_body_without_waiting_for_header_response</span></a>
is set to true.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-processingresponse-override-message-timeout">
<dt>override_message_timeout</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) When ext_proc server receives a request message, in case it needs more
time to process the message, it sends back a ProcessingResponse message
with a new timeout value. When Envoy receives this response message,
it ignores other fields in the response, just stop the original timer,
which has the timeout value specified in
<a class="reference internal" href="../../../extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-message-timeout"><span class="std std-ref">message_timeout</span></a>
and start a new timer with this <code class="docutils literal notranslate"><span class="pre">override_message_timeout</span></code> value and keep the
Envoy ext_proc filter state machine intact.
Has to be &gt;= 1ms and &lt;=
<a class="reference internal" href="../../../extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-max-message-timeout"><span class="std std-ref">max_message_timeout</span></a>
Such message can be sent at most once in a particular Envoy ext_proc filter processing state.
To enable this API, one has to set <code class="docutils literal notranslate"><span class="pre">max_message_timeout</span></code> to a number &gt;= 1ms.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-httpheaders">
<span id="envoy-v3-api-msg-service-ext-proc-v3-httpheaders"></span><h2>service.ext_proc.v3.HttpHeaders<a class="headerlink" href="#service-ext-proc-v3-httpheaders" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L208">[service.ext_proc.v3.HttpHeaders proto]</a></p>
<p>This message is sent to the external server when the HTTP request and responses
are first received.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;end_of_stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-httpheaders-headers">
<dt>headers</dt><dd><p>(<a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-headermap"><span class="std std-ref">config.core.v3.HeaderMap</span></a>) The HTTP request headers. All header keys will be
lower-cased, because HTTP header keys are case-insensitive.
The header value is encoded in the
<a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-headervalue-raw-value"><span class="std std-ref">raw_value</span></a> field.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-httpheaders-end-of-stream">
<dt>end_of_stream</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) If <code class="docutils literal notranslate"><span class="pre">true</span></code>, then there is no message body associated with this
request or response.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-httpbody">
<span id="envoy-v3-api-msg-service-ext-proc-v3-httpbody"></span><h2>service.ext_proc.v3.HttpBody<a class="headerlink" href="#service-ext-proc-v3-httpbody" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L229">[service.ext_proc.v3.HttpBody proto]</a></p>
<p>This message is sent to the external server when the HTTP request and
response bodies are received.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;end_of_stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-httpbody-body">
<dt>body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bytes</a>) The contents of the body in the HTTP request/response. Note that in
streaming mode multiple <code class="docutils literal notranslate"><span class="pre">HttpBody</span></code> messages may be sent.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-httpbody-end-of-stream">
<dt>end_of_stream</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) If <code class="docutils literal notranslate"><span class="pre">true</span></code>, this will be the last <code class="docutils literal notranslate"><span class="pre">HttpBody</span></code> message that will be sent and no
trailers will be sent for the current request/response.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-httptrailers">
<span id="envoy-v3-api-msg-service-ext-proc-v3-httptrailers"></span><h2>service.ext_proc.v3.HttpTrailers<a class="headerlink" href="#service-ext-proc-v3-httptrailers" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L241">[service.ext_proc.v3.HttpTrailers proto]</a></p>
<p>This message is sent to the external server when the HTTP request and
response trailers are received.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;trailers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-httptrailers-trailers">
<dt>trailers</dt><dd><p>(<a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-headermap"><span class="std std-ref">config.core.v3.HeaderMap</span></a>) The header value is encoded in the
<a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-headervalue-raw-value"><span class="std std-ref">raw_value</span></a> field.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-headersresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-headersresponse"></span><h2>service.ext_proc.v3.HeadersResponse<a class="headerlink" href="#service-ext-proc-v3-headersresponse" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L251">[service.ext_proc.v3.HeadersResponse proto]</a></p>
<p>This message is sent by the external server to Envoy after <code class="docutils literal notranslate"><span class="pre">HttpHeaders</span></code> was
sent to it.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;response&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-headersresponse-response">
<dt>response</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-commonresponse"><span class="std std-ref">service.ext_proc.v3.CommonResponse</span></a>) Details the modifications (if any) to be made by Envoy to the current
request/response.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-bodyresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-bodyresponse"></span><h2>service.ext_proc.v3.BodyResponse<a class="headerlink" href="#service-ext-proc-v3-bodyresponse" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L259">[service.ext_proc.v3.BodyResponse proto]</a></p>
<p>This message is sent by the external server to Envoy after <code class="docutils literal notranslate"><span class="pre">HttpBody</span></code> was
sent to it.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;response&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-bodyresponse-response">
<dt>response</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-commonresponse"><span class="std std-ref">service.ext_proc.v3.CommonResponse</span></a>) Details the modifications (if any) to be made by Envoy to the current
request/response.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-trailersresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-trailersresponse"></span><h2>service.ext_proc.v3.TrailersResponse<a class="headerlink" href="#service-ext-proc-v3-trailersresponse" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L267">[service.ext_proc.v3.TrailersResponse proto]</a></p>
<p>This message is sent by the external server to Envoy after <code class="docutils literal notranslate"><span class="pre">HttpTrailers</span></code> was
sent to it.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;header_mutation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-trailersresponse-header-mutation">
<dt>header_mutation</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-headermutation"><span class="std std-ref">service.ext_proc.v3.HeaderMutation</span></a>) Details the modifications (if any) to be made by Envoy to the current
request/response trailers.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-commonresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-commonresponse"></span><h2>service.ext_proc.v3.CommonResponse<a class="headerlink" href="#service-ext-proc-v3-commonresponse" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L275">[service.ext_proc.v3.CommonResponse proto]</a></p>
<p>This message contains common fields between header and body responses.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;header_mutation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;body_mutation&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;clear_route_cache&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-commonresponse-status">
<dt>status</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-enum-service-ext-proc-v3-commonresponse-responsestatus"><span class="std std-ref">service.ext_proc.v3.CommonResponse.ResponseStatus</span></a>) If set, provide additional direction on how the Envoy proxy should
handle the rest of the HTTP filter chain.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-commonresponse-header-mutation">
<dt>header_mutation</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-headermutation"><span class="std std-ref">service.ext_proc.v3.HeaderMutation</span></a>) Instructions on how to manipulate the headers. When responding to an
HttpBody request, header mutations will only take effect if
the current processing mode for the body is BUFFERED.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-commonresponse-body-mutation">
<dt>body_mutation</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-bodymutation"><span class="std std-ref">service.ext_proc.v3.BodyMutation</span></a>) Replace the body of the last message sent to the remote server on this
stream. If responding to an HttpBody request, simply replace or clear
the body chunk that was sent with that request. Body mutations may take
effect in response either to <code class="docutils literal notranslate"><span class="pre">header</span></code> or <code class="docutils literal notranslate"><span class="pre">body</span></code> messages. When it is
in response to <code class="docutils literal notranslate"><span class="pre">header</span></code> messages, it only take effect if the
<a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-commonresponse-status"><span class="std std-ref">status</span></a>
is set to CONTINUE_AND_REPLACE.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-commonresponse-clear-route-cache">
<dt>clear_route_cache</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Clear the route cache for the current client request. This is necessary
if the remote server modified headers that are used to calculate the route.
This field is ignored in the response direction. This field is also ignored
if the Envoy ext_proc filter is in the upstream filter chain.</p>
</dd>
</dl>
</section>
<section id="enum-service-ext-proc-v3-commonresponse-responsestatus">
<span id="envoy-v3-api-enum-service-ext-proc-v3-commonresponse-responsestatus"></span><h2>Enum service.ext_proc.v3.CommonResponse.ResponseStatus<a class="headerlink" href="#enum-service-ext-proc-v3-commonresponse-responsestatus" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L277">[service.ext_proc.v3.CommonResponse.ResponseStatus proto]</a></p>
<p>The status of the response.</p>
<dl class="simple" id="envoy-v3-api-enum-value-service-ext-proc-v3-commonresponse-responsestatus-continue">
<dt>CONTINUE</dt><dd><p><em>(DEFAULT)</em> ⁣Apply the mutation instructions in this message to the
request or response, and then continue processing the filter
stream as normal. This is the default.</p>
</dd>
</dl>
<dl id="envoy-v3-api-enum-value-service-ext-proc-v3-commonresponse-responsestatus-continue-and-replace">
<dt>CONTINUE_AND_REPLACE</dt><dd><p>⁣Apply the specified header mutation, replace the body with the body
specified in the body mutation (if present), and do not send any
further messages for this request or response even if the processing
mode is configured to do so.</p>
<p>When used in response to a request_headers or response_headers message,
this status makes it possible to either completely replace the body
while discarding the original body, or to add a body to a message that
formerly did not have one.</p>
<p>In other words, this response makes it possible to turn an HTTP GET
into a POST, PUT, or PATCH.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-immediateresponse">
<span id="envoy-v3-api-msg-service-ext-proc-v3-immediateresponse"></span><h2>service.ext_proc.v3.ImmediateResponse<a class="headerlink" href="#service-ext-proc-v3-immediateresponse" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L338">[service.ext_proc.v3.ImmediateResponse proto]</a></p>
<p>This message causes the filter to attempt to create a locally
generated response, send it  downstream, stop processing
additional filters, and ignore any additional messages received
from the remote server for this request or response. If a response
has already started, then  this will either ship the reply directly
to the downstream codec, or reset the stream.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;grpc_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;details&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-immediateresponse-status">
<dt>status</dt><dd><p>(<a class="reference internal" href="../../../type/v3/http_status.proto.html#envoy-v3-api-msg-type-v3-httpstatus"><span class="std std-ref">type.v3.HttpStatus</span></a>, <em>REQUIRED</em>) The response code to return.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-immediateresponse-headers">
<dt>headers</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-headermutation"><span class="std std-ref">service.ext_proc.v3.HeaderMutation</span></a>) Apply changes to the default headers, which will include content-type.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-immediateresponse-body">
<dt>body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bytes</a>) The message body to return with the response which is sent using the
text/plain content type, or encoded in the grpc-message header.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-immediateresponse-grpc-status">
<dt>grpc_status</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-service-ext-proc-v3-grpcstatus"><span class="std std-ref">service.ext_proc.v3.GrpcStatus</span></a>) If set, then include a gRPC status trailer.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-immediateresponse-details">
<dt>details</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) A string detailing why this local reply was sent, which may be included
in log and debug output (e.g. this populates the %RESPONSE_CODE_DETAILS%
command operator field for use in access logging).</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-grpcstatus">
<span id="envoy-v3-api-msg-service-ext-proc-v3-grpcstatus"></span><h2>service.ext_proc.v3.GrpcStatus<a class="headerlink" href="#service-ext-proc-v3-grpcstatus" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L359">[service.ext_proc.v3.GrpcStatus proto]</a></p>
<p>This message specifies a gRPC status for an ImmediateResponse message.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-grpcstatus-status">
<dt>status</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) The actual gRPC status.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-headermutation">
<span id="envoy-v3-api-msg-service-ext-proc-v3-headermutation"></span><h2>service.ext_proc.v3.HeaderMutation<a class="headerlink" href="#service-ext-proc-v3-headermutation" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L366">[service.ext_proc.v3.HeaderMutation proto]</a></p>
<p>Change HTTP headers or trailers by appending, replacing, or removing
headers.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;set_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;remove_headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-headermutation-set-headers">
<dt>set_headers</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-headervalueoption"><span class="std std-ref">config.core.v3.HeaderValueOption</span></a>) Add or replace HTTP headers. Attempts to set the value of
any <code class="docutils literal notranslate"><span class="pre">x-envoy</span></code> header, and attempts to set the <code class="docutils literal notranslate"><span class="pre">:method</span></code>,
<code class="docutils literal notranslate"><span class="pre">:authority</span></code>, <code class="docutils literal notranslate"><span class="pre">:scheme</span></code>, or <code class="docutils literal notranslate"><span class="pre">host</span></code> headers will be ignored.
The header value is encoded in the
<a class="reference internal" href="../../../config/core/v3/base.proto.html#envoy-v3-api-field-config-core-v3-headervalue-raw-value"><span class="std std-ref">raw_value</span></a> field.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-service-ext-proc-v3-headermutation-remove-headers">
<dt>remove_headers</dt><dd><p>(<strong>repeated</strong> <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Remove these HTTP headers. Attempts to remove system headers –
any header starting with <code class="docutils literal notranslate"><span class="pre">:</span></code>, plus <code class="docutils literal notranslate"><span class="pre">host</span></code> – will be ignored.</p>
</dd>
</dl>
</section>
<section id="service-ext-proc-v3-bodymutation">
<span id="envoy-v3-api-msg-service-ext-proc-v3-bodymutation"></span><h2>service.ext_proc.v3.BodyMutation<a class="headerlink" href="#service-ext-proc-v3-bodymutation" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.33.7/api/envoy/service/ext_proc/v3/external_processor.proto#L392">[service.ext_proc.v3.BodyMutation proto]</a></p>
<p>This message specifies the body mutation the server sends to Envoy.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;clear_body&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-service-ext-proc-v3-bodymutation-body">
<dt>body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bytes</a>) The entire body to replace.
Should only be used when the corresponding <code class="docutils literal notranslate"><span class="pre">BodySendMode</span></code> in the
<a class="reference internal" href="../../../extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-processing-mode"><span class="std std-ref">processing_mode</span></a>
is not set to <code class="docutils literal notranslate"><span class="pre">FULL_DUPLEX_STREAMED</span></code>.</p>
<p>The type of mutation for the body.</p>
<p>Only one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-bodymutation-body"><span class="std std-ref">body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-bodymutation-clear-body"><span class="std std-ref">clear_body</span></a> may be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-service-ext-proc-v3-bodymutation-clear-body">
<dt>clear_body</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Clear the corresponding body chunk.
Should only be used when the corresponding <code class="docutils literal notranslate"><span class="pre">BodySendMode</span></code> in the
<a class="reference internal" href="../../../extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-processing-mode"><span class="std std-ref">processing_mode</span></a>
is not set to <code class="docutils literal notranslate"><span class="pre">FULL_DUPLEX_STREAMED</span></code>.
Clear the corresponding body chunk.</p>
<p>The type of mutation for the body.</p>
<p>Only one of <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-bodymutation-body"><span class="std std-ref">body</span></a>, <a class="reference internal" href="#envoy-v3-api-field-service-ext-proc-v3-bodymutation-clear-body"><span class="std std-ref">clear_body</span></a> may be set.</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../extension/v3/config_discovery.proto.html" class="btn btn-neutral float-left" title="Extension config discovery service (ECDS) (proto)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../accesslog/v3/als.proto.html" class="btn btn-neutral float-right" title="gRPC access log service (ALS) (proto)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2025, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>