<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fault Injection (proto) &mdash; envoy tag-v1.30.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=d7d10ef0" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/envoy.css?v=3ec0219e" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/tabs.css?v=4da122e5" />

  
    <link rel="shortcut icon" href="../../../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js?v=18d97e9e"></script>
        <script src="../../../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../../../../_static/copybutton.js?v=db7b0edf"></script>
    <script src="../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <link rel="next" title="FileSystemBufferFilterConfig (proto)" href="../../file_system_buffer/v3/file_system_buffer.proto.html" />
    <link rel="prev" title="External Processing Filter (proto)" href="../../ext_proc/v3/processing_mode.proto.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../index.html">
            
              <img src="../../../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                tag-v1.30.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../../api.html">v3 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../../../config/config.html">Extensions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/accesslog/filters.html">Access log extension filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/formatter/formatter.html">Access log formatters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/accesslog/accesslog.html">Access loggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/cluster/cluster.html">Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/common/common.html">Common</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/compression/compression.html">Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/config_validators/config_validators.html">Config validators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/contrib/contrib.html">Contrib extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/dns_resolver/dns_resolver.html">DNS resolver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/endpoint/endpoint.html">Endpoint</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../../../../../config/filter/filter.html">Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/grpc_credential/grpc_credential.html">Grpc credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/health_check_event_sinks/health_check_event_sinks.html">Health check event sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/health_checker/health_checker.html">Health checkers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/early_header_mutation.html">HTTP early header mutation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/custom_response.html">Custom response policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/header_formatters.html">HTTP header formatters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/header_validators.html">HTTP header validators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/original_ip_detection.html">HTTP original IP detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/stateful_session.html">HTTP stateful session</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/injected_credentials/injected_credentials.html">Injected credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/geoip_provider/geoip_provider.html">Geolocation providers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/trace/trace.html">HTTP tracers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/internal_redirect/internal_redirect.html">Internal redirect predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/path/match/path_matcher.html">Path matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/path/rewrite/path_rewriter.html">Path rewriter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/quic/quic_extensions.html">Quic extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/descriptors/descriptors.html">Rate limit descriptors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/rbac/rbac.html">RBAC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/rbac/matchers.html">RBAC matchers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/request_id/request_id.html">Request ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/resource_monitor/resource_monitor.html">Resource monitors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/retry/retry.html">Retry predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/stat_sinks/stat_sinks.html">Stat sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/string_matcher/string_matcher.html">String Matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/transport_socket/transport_socket.html">Transport sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/upstream/upstream.html">Upstream configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/wasm/wasm.html">WASM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/watchdog/watchdog.html">Watchdog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/load_balancing_policies/load_balancing_policies.html">Load balancing policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/cluster_specifier/cluster_specifier.html">Cluster specifier</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../service/service.html">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../common_messages/common_messages_xds.html">Common messages (XDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../version_history/version_history.html">Version history</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../../../api/api.html">API</a></li>
          <li class="breadcrumb-item"><a href="../../../../../api.html">v3 API reference</a></li>
          <li class="breadcrumb-item"><a href="../../../../../config/config.html">Extensions</a></li>
          <li class="breadcrumb-item"><a href="../../../../../config/filter/filter.html">Filters</a></li>
          <li class="breadcrumb-item"><a href="../../../../../config/filter/http/http.html">HTTP filters</a></li>
      <li class="breadcrumb-item active">Fault Injection (proto)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../_sources/api-v3/extensions/filters/http/fault/v3/fault.proto.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="fault-injection-proto">
<span id="envoy-v3-api-file-envoy-extensions-filters-http-fault-v3-fault-proto"></span><h1>Fault Injection (proto)<a class="headerlink" href="#fault-injection-proto" title="Permalink to this heading"></a></h1>
<p id="extension-envoy-filters-http-fault">This extension has the qualified name <code class="docutils literal notranslate"><span class="pre">envoy.filters.http.fault</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This extension is intended to be robust against untrusted downstream traffic. It
assumes that the upstream is trusted.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This extension extends and can be used with the following extension category:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../network/http_connection_manager/v3/http_connection_manager.proto.html#extension-category-envoy-filters-http"><span class="std std-ref">envoy.filters.http</span></a></p></li>
</ul>
<p>This extension must be configured with one of the following type URLs:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-fault-v3-httpfault"><span class="std std-ref">type.googleapis.com/envoy.extensions.filters.http.fault.v3.HTTPFault</span></a></p></li>
</ul>
</div>
<p>Fault Injection <a class="reference internal" href="../../../../../../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection"><span class="std std-ref">configuration overview</span></a>.</p>
<section id="extensions-filters-http-fault-v3-faultabort">
<span id="envoy-v3-api-msg-extensions-filters-http-fault-v3-faultabort"></span><h2>extensions.filters.http.fault.v3.FaultAbort<a class="headerlink" href="#extensions-filters-http-fault-v3-faultabort" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.30.2/api/envoy/extensions/filters/http/fault/v3/fault.proto#L26">[extensions.filters.http.fault.v3.FaultAbort proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;http_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;grpc_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;header_abort&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;percentage&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-http-status">
<dt>http_status</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) HTTP status code to use to abort the HTTP request.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-http-status"><span class="std std-ref">http_status</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-grpc-status"><span class="std std-ref">grpc_status</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-header-abort"><span class="std std-ref">header_abort</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-grpc-status">
<dt>grpc_status</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">uint32</a>) gRPC status code to use to abort the gRPC request.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-http-status"><span class="std std-ref">http_status</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-grpc-status"><span class="std std-ref">grpc_status</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-header-abort"><span class="std std-ref">header_abort</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-header-abort">
<dt>header_abort</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-fault-v3-faultabort-headerabort"><span class="std std-ref">extensions.filters.http.fault.v3.FaultAbort.HeaderAbort</span></a>) Fault aborts are controlled via an HTTP header (if applicable).</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-http-status"><span class="std std-ref">http_status</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-grpc-status"><span class="std std-ref">grpc_status</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-header-abort"><span class="std std-ref">header_abort</span></a> must be set.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-percentage">
<dt>percentage</dt><dd><p>(<a class="reference internal" href="../../../../../type/v3/percent.proto.html#envoy-v3-api-msg-type-v3-fractionalpercent"><span class="std std-ref">type.v3.FractionalPercent</span></a>) The percentage of requests/operations/connections that will be aborted with the error code
provided.</p>
</dd>
</dl>
</section>
<section id="extensions-filters-http-fault-v3-faultabort-headerabort">
<span id="envoy-v3-api-msg-extensions-filters-http-fault-v3-faultabort-headerabort"></span><h2>extensions.filters.http.fault.v3.FaultAbort.HeaderAbort<a class="headerlink" href="#extensions-filters-http-fault-v3-faultabort-headerabort" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.30.2/api/envoy/extensions/filters/http/fault/v3/fault.proto#L33">[extensions.filters.http.fault.v3.FaultAbort.HeaderAbort proto]</a></p>
<p>Fault aborts are controlled via an HTTP header (if applicable). See the
<a class="reference internal" href="../../../../../../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-http-header"><span class="std std-ref">HTTP fault filter</span></a> documentation for
more information.</p>
</section>
<section id="extensions-filters-http-fault-v3-httpfault">
<span id="envoy-v3-api-msg-extensions-filters-http-fault-v3-httpfault"></span><h2>extensions.filters.http.fault.v3.HTTPFault<a class="headerlink" href="#extensions-filters-http-fault-v3-httpfault" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.30.2/api/envoy/extensions/filters/http/fault/v3/fault.proto#L59">[extensions.filters.http.fault.v3.HTTPFault proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;delay&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;abort&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;upstream_cluster&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;downstream_nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;max_active_faults&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;response_rate_limit&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;delay_percent_runtime&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;abort_percent_runtime&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;delay_duration_runtime&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;abort_http_status_runtime&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;max_active_faults_runtime&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;response_rate_limit_percent_runtime&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;abort_grpc_status_runtime&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;disable_downstream_cluster_stats&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;filter_metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-delay">
<dt>delay</dt><dd><p>(<a class="reference internal" href="../../../common/fault/v3/fault.proto.html#envoy-v3-api-msg-extensions-filters-common-fault-v3-faultdelay"><span class="std std-ref">extensions.filters.common.fault.v3.FaultDelay</span></a>) If specified, the filter will inject delays based on the values in the
object.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-abort">
<dt>abort</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-http-fault-v3-faultabort"><span class="std std-ref">extensions.filters.http.fault.v3.FaultAbort</span></a>) If specified, the filter will abort requests based on the values in
the object. At least <code class="docutils literal notranslate"><span class="pre">abort</span></code> or <code class="docutils literal notranslate"><span class="pre">delay</span></code> must be specified.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-upstream-cluster">
<dt>upstream_cluster</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies the name of the (destination) upstream cluster that the
filter should match on. Fault injection will be restricted to requests
bound to the specific upstream cluster.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-headers">
<dt>headers</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="../../../../../config/route/v3/route_components.proto.html#envoy-v3-api-msg-config-route-v3-headermatcher"><span class="std std-ref">config.route.v3.HeaderMatcher</span></a>) Specifies a set of headers that the filter should match on. The fault
injection filter can be applied selectively to requests that match a set of
headers specified in the fault filter config. The chances of actual fault
injection further depend on the value of the <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-http-fault-v3-faultabort-percentage"><span class="std std-ref">percentage</span></a> field.
The filter will check the request’s headers against all the specified
headers in the filter config. A match will happen if all the headers in the
config are present in the request with the same values (or based on
presence if the <code class="docutils literal notranslate"><span class="pre">value</span></code> field is not in the config).</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-downstream-nodes">
<dt>downstream_nodes</dt><dd><p>(<strong>repeated</strong> <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Faults are injected for the specified list of downstream hosts. If this
setting is not set, faults are injected for all downstream nodes.
Downstream node name is taken from <a class="reference internal" href="../../../../../../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-downstream-service-node"><span class="std std-ref">the HTTP
x-envoy-downstream-service-node</span></a> header and compared
against downstream_nodes list.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-max-active-faults">
<dt>max_active_faults</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) The maximum number of faults that can be active at a single time via the configured fault
filter. Note that because this setting can be overridden at the route level, it’s possible
for the number of active faults to be greater than this value (if injected via a different
route). If not specified, defaults to unlimited. This setting can be overridden via
<code class="docutils literal notranslate"><span class="pre">runtime</span> <span class="pre">&lt;config_http_filters_fault_injection_runtime&gt;</span></code> and any faults that are not injected
due to overflow will be indicated via the <code class="docutils literal notranslate"><span class="pre">faults_overflow</span>
<span class="pre">&lt;config_http_filters_fault_injection_stats&gt;</span></code> stat.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Like other <a class="reference internal" href="../../../../../../intro/arch_overview/upstream/circuit_breaking.html#arch-overview-circuit-break"><span class="std std-ref">circuit breakers</span></a> in Envoy, this is a fuzzy
limit. It’s possible for the number of active faults to rise slightly above the configured
amount due to the implementation details.</p>
</div>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-response-rate-limit">
<dt>response_rate_limit</dt><dd><p>(<a class="reference internal" href="../../../common/fault/v3/fault.proto.html#envoy-v3-api-msg-extensions-filters-common-fault-v3-faultratelimit"><span class="std std-ref">extensions.filters.common.fault.v3.FaultRateLimit</span></a>) The response rate limit to be applied to the response body of the stream. When configured,
the percentage can be overridden by the <a class="reference internal" href="../../../../../../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-runtime"><span class="std std-ref">fault.http.rate_limit.response_percent</span></a> runtime key.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>This is a per-stream limit versus a connection level limit. This means that concurrent streams
will each get an independent limit.</p>
</div>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-delay-percent-runtime">
<dt>delay_percent_runtime</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The runtime key to override the <a class="reference internal" href="../../../../../../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-runtime"><span class="std std-ref">default</span></a>
runtime. The default is: fault.http.delay.fixed_delay_percent</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-abort-percent-runtime">
<dt>abort_percent_runtime</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The runtime key to override the <a class="reference internal" href="../../../../../../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-runtime"><span class="std std-ref">default</span></a>
runtime. The default is: fault.http.abort.abort_percent</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-delay-duration-runtime">
<dt>delay_duration_runtime</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The runtime key to override the <a class="reference internal" href="../../../../../../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-runtime"><span class="std std-ref">default</span></a>
runtime. The default is: fault.http.delay.fixed_duration_ms</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-abort-http-status-runtime">
<dt>abort_http_status_runtime</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The runtime key to override the <a class="reference internal" href="../../../../../../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-runtime"><span class="std std-ref">default</span></a>
runtime. The default is: fault.http.abort.http_status</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-max-active-faults-runtime">
<dt>max_active_faults_runtime</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The runtime key to override the <a class="reference internal" href="../../../../../../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-runtime"><span class="std std-ref">default</span></a>
runtime. The default is: fault.http.max_active_faults</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-response-rate-limit-percent-runtime">
<dt>response_rate_limit_percent_runtime</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The runtime key to override the <a class="reference internal" href="../../../../../../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-runtime"><span class="std std-ref">default</span></a>
runtime. The default is: fault.http.rate_limit.response_percent</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-abort-grpc-status-runtime">
<dt>abort_grpc_status_runtime</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The runtime key to override the <a class="reference internal" href="../../../../../../configuration/http/http_filters/fault_filter.html#config-http-filters-fault-injection-runtime"><span class="std std-ref">default</span></a>
runtime. The default is: fault.http.abort.grpc_status</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-disable-downstream-cluster-stats">
<dt>disable_downstream_cluster_stats</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) To control whether stats storage is allocated dynamically for each downstream server.
If set to true, “x-envoy-downstream-service-cluster” field of header will be ignored by this filter.
If set to false, dynamic stats storage will be allocated for the downstream cluster name.
Default value is false.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-http-fault-v3-httpfault-filter-metadata">
<dt>filter_metadata</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#struct">Struct</a>) When an abort or delay fault is executed, the metadata struct provided here will be added to the
request’s dynamic metadata under the namespace corresponding to the name of the fault filter.
This data can be logged as part of Access Logs using the <a class="reference internal" href="../../../../../../configuration/observability/access_log/usage.html#config-access-log-command-operators"><span class="std std-ref">command operator</span></a> %DYNAMIC_METADATA(NAMESPACE)%, where NAMESPACE is the name of
the fault filter.</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../ext_proc/v3/processing_mode.proto.html" class="btn btn-neutral float-left" title="External Processing Filter (proto)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../file_system_buffer/v3/file_system_buffer.proto.html" class="btn btn-neutral float-right" title="FileSystemBufferFilterConfig (proto)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>