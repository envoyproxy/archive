<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thrift Proxy Route Configuration (proto) &mdash; envoy tag-v1.27.4 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=0e372da6" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/envoy.css?v=3ec0219e" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/tabs.css?v=a5c4661c" />
    <link rel="shortcut icon" href="../../../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js?v=ebb5a79e"></script>
        <script src="../../../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../../../../_static/copybutton.js?v=db7b0edf"></script>
    <script src="../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <link rel="next" title="Thrift Proxy (proto)" href="thrift_proxy.proto.html" />
    <link rel="prev" title="TCP Proxy (proto)" href="../../tcp_proxy/v3/tcp_proxy.proto.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../index.html">
            
              <img src="../../../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                tag-v1.27.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../../api.html">v3 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../../../config/config.html">Extensions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/accesslog/filters.html">Access log extension filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/formatter/formatter.html">Access log formatters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/accesslog/accesslog.html">Access loggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/cluster/cluster.html">Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/common/common.html">Common</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/compression/compression.html">Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/config_validators/config_validators.html">Config validators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/contrib/contrib.html">Contrib extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/dns_resolver/dns_resolver.html">DNS resolver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/endpoint/endpoint.html">Endpoint</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../../../../../config/filter/filter.html">Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/grpc_credential/grpc_credential.html">Grpc credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/health_check_event_sinks/health_check_event_sinks.html">Health check event sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/health_checker/health_checker.html">Health checkers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/early_header_mutation.html">HTTP early header mutation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/custom_response.html">Custom response policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/header_formatters.html">HTTP header formatters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/header_validators.html">HTTP header validators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/original_ip_detection.html">HTTP original IP detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/http/stateful_session.html">HTTP stateful session</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/trace/trace.html">HTTP tracers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/internal_redirect/internal_redirect.html">Internal redirect predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/path/match/path_matcher.html">Path matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/path/rewrite/path_rewriter.html">Path rewriter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/quic/quic_extensions.html">Quic extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/descriptors/descriptors.html">Rate limit descriptors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/rbac/rbac.html">RBAC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/rbac/matchers.html">RBAC matchers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/request_id/request_id.html">Request ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/resource_monitor/resource_monitor.html">Resource monitors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/retry/retry.html">Retry predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/stat_sinks/stat_sinks.html">Stat sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/transport_socket/transport_socket.html">Transport sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/upstream/upstream.html">Upstream configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/wasm/wasm.html">WASM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/watchdog/watchdog.html">Watchdog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../config/load_balancing_policies/load_balancing_policies.html">Load balancing policies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../service/service.html">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../common_messages/common_messages_xds.html">Common messages (XDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../version_history/version_history.html">Version history</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../../../api/api.html">API</a></li>
          <li class="breadcrumb-item"><a href="../../../../../api.html">v3 API reference</a></li>
          <li class="breadcrumb-item"><a href="../../../../../config/config.html">Extensions</a></li>
          <li class="breadcrumb-item"><a href="../../../../../config/filter/filter.html">Filters</a></li>
          <li class="breadcrumb-item"><a href="../../../../../config/filter/network/network.html">Network filters</a></li>
      <li class="breadcrumb-item active">Thrift Proxy Route Configuration (proto)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../_sources/api-v3/extensions/filters/network/thrift_proxy/v3/route.proto.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="thrift-proxy-route-configuration-proto">
<span id="envoy-v3-api-file-envoy-extensions-filters-network-thrift-proxy-v3-route-proto"></span><h1>Thrift Proxy Route Configuration (proto)<a class="headerlink" href="#thrift-proxy-route-configuration-proto" title="Permalink to this heading"></a></h1>
<p>Thrift Proxy <a class="reference internal" href="../../../../../../configuration/listeners/network_filters/thrift_proxy_filter.html#config-network-filters-thrift-proxy"><span class="std std-ref">configuration overview</span></a>.</p>
<section id="extensions-filters-network-thrift-proxy-v3-routeconfiguration">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routeconfiguration"></span><h2>extensions.filters.network.thrift_proxy.v3.RouteConfiguration<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-routeconfiguration" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.27.4/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L22">[extensions.filters.network.thrift_proxy.v3.RouteConfiguration proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;routes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;validate_clusters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeconfiguration-name">
<dt>name</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The name of the route configuration. This name is used in asynchronous route discovery.
For example, it might match
<a class="reference internal" href="thrift_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-trds-route-config-name"><span class="std std-ref">route_config_name</span></a> in
<a class="reference internal" href="thrift_proxy.proto.html#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-trds"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.Trds</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeconfiguration-routes">
<dt>routes</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-route"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.Route</span></a>) The list of routes that will be matched, in order, against incoming requests. The first route
that matches will be used.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeconfiguration-validate-clusters">
<dt>validate_clusters</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) An optional boolean that specifies whether the clusters that the route
table refers to will be validated by the cluster manager. If set to true
and a route refers to a non-existent cluster, the route table will not
load. If set to false and a route refers to a non-existent cluster, the
route table will load and the router filter will return a INTERNAL_ERROR
if the route is selected at runtime. This setting defaults to true if the route table
is statically defined via the <a class="reference internal" href="thrift_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-thriftproxy-route-config"><span class="std std-ref">route_config</span></a>
option. This setting default to false if the route table is loaded dynamically via the
<a class="reference internal" href="thrift_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-thriftproxy-trds"><span class="std std-ref">trds</span></a>
option. Users may wish to override the default behavior in certain cases (for example when
using CDS with a static route table).</p>
</dd>
</dl>
</section>
<section id="extensions-filters-network-thrift-proxy-v3-route">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-route"></span><h2>extensions.filters.network.thrift_proxy.v3.Route<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-route" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.27.4/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L53">[extensions.filters.network.thrift_proxy.v3.Route proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;match&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;route&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-route-match">
<dt>match</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routematch"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.RouteMatch</span></a>, <em>REQUIRED</em>) Route matching parameters.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-route-route">
<dt>route</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routeaction"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.RouteAction</span></a>, <em>REQUIRED</em>) Route request to some upstream cluster.</p>
</dd>
</dl>
</section>
<section id="extensions-filters-network-thrift-proxy-v3-routematch">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routematch"></span><h2>extensions.filters.network.thrift_proxy.v3.RouteMatch<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-routematch" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.27.4/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L64">[extensions.filters.network.thrift_proxy.v3.RouteMatch proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;method_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;service_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;invert&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-method-name">
<dt>method_name</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) If specified, the route must exactly match the request method name. As a special case, an
empty string matches any request method name.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-method-name"><span class="std std-ref">method_name</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-service-name"><span class="std std-ref">service_name</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-service-name">
<dt>service_name</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) If specified, the route must have the service name as the request method name prefix. As a
special case, an empty string matches any service name. Only relevant when service
multiplexing.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-method-name"><span class="std std-ref">method_name</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-service-name"><span class="std std-ref">service_name</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-invert">
<dt>invert</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Inverts whatever matching is done in the <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-method-name"><span class="std std-ref">method_name</span></a> or
<a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-service-name"><span class="std std-ref">service_name</span></a> fields.
Cannot be combined with wildcard matching as that would result in routes never being matched.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This does not invert matching done as part of the <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-headers"><span class="std std-ref">headers field</span></a> field. To
invert header matching, see <a class="reference internal" href="../../../../../config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-headermatcher-invert-match"><span class="std std-ref">invert_match</span></a>.</p>
</div>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routematch-headers">
<dt>headers</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="../../../../../config/route/v3/route_components.proto.html#envoy-v3-api-msg-config-route-v3-headermatcher"><span class="std std-ref">config.route.v3.HeaderMatcher</span></a>) Specifies a set of headers that the route should match on. The router will check the request’s
headers against all the specified headers in the route config. A match will happen if all the
headers in the route are present in the request with the same values (or based on presence if
the value field is not in the config). Note that this only applies for Thrift transports and/or
protocols that support headers.</p>
</dd>
</dl>
</section>
<section id="extensions-filters-network-thrift-proxy-v3-routeaction">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routeaction"></span><h2>extensions.filters.network.thrift_proxy.v3.RouteAction<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-routeaction" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.27.4/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L104">[extensions.filters.network.thrift_proxy.v3.RouteAction proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;cluster&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;weighted_clusters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;cluster_header&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metadata_match&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;rate_limits&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">  </span><span class="nt">&quot;strip_service_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;request_mirror_policies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster">
<dt>cluster</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Indicates a single upstream cluster to which the request should be routed
to.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster"><span class="std std-ref">cluster</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-weighted-clusters"><span class="std std-ref">weighted_clusters</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster-header"><span class="std std-ref">cluster_header</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-weighted-clusters">
<dt>weighted_clusters</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-weightedcluster"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.WeightedCluster</span></a>) Multiple upstream clusters can be specified for a given route. The
request is routed to one of the upstream clusters based on weights
assigned to each cluster.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster"><span class="std std-ref">cluster</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-weighted-clusters"><span class="std std-ref">weighted_clusters</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster-header"><span class="std std-ref">cluster_header</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster-header">
<dt>cluster_header</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Envoy will determine the cluster to route to by reading the value of the
Thrift header named by cluster_header from the request headers. If the
header is not found or the referenced cluster does not exist Envoy will
respond with an unknown method exception or an internal error exception,
respectively.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster"><span class="std std-ref">cluster</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-weighted-clusters"><span class="std std-ref">weighted_clusters</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-cluster-header"><span class="std std-ref">cluster_header</span></a> must be set.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-metadata-match">
<dt>metadata_match</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-metadata"><span class="std std-ref">config.core.v3.Metadata</span></a>) Optional endpoint metadata match criteria used by the subset load balancer. Only endpoints in
the upstream cluster with metadata matching what is set in this field will be considered.
Note that this will be merged with what’s provided in <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight-metadata-match"><span class="std std-ref">WeightedCluster.metadata_match</span></a>,
with values there taking precedence. Keys and values should be provided under the “envoy.lb”
metadata key.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-rate-limits">
<dt>rate_limits</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="../../../../../config/route/v3/route_components.proto.html#envoy-v3-api-msg-config-route-v3-ratelimit"><span class="std std-ref">config.route.v3.RateLimit</span></a>) Specifies a set of rate limit configurations that could be applied to the route.
N.B. Thrift service or method name matching can be achieved by specifying a RequestHeaders
action with the header name “:method-name”.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-strip-service-name">
<dt>strip_service_name</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Strip the service prefix from the method name, if there’s a prefix. For
example, the method call <a class="reference external" href="Service:method">Service:method</a> would end up being just method.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-request-mirror-policies">
<dt>request_mirror_policies</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routeaction-requestmirrorpolicy"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.RouteAction.RequestMirrorPolicy</span></a>) Indicates that the route has request mirroring policies.</p>
</dd>
</dl>
</section>
<section id="extensions-filters-network-thrift-proxy-v3-routeaction-requestmirrorpolicy">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-routeaction-requestmirrorpolicy"></span><h2>extensions.filters.network.thrift_proxy.v3.RouteAction.RequestMirrorPolicy<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-routeaction-requestmirrorpolicy" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.27.4/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L116">[extensions.filters.network.thrift_proxy.v3.RouteAction.RequestMirrorPolicy proto]</a></p>
<p>The router is capable of shadowing traffic from one cluster to another. The current
implementation is “fire and forget,” meaning Envoy will not wait for the shadow cluster to
respond before returning the response from the primary cluster. All normal statistics are
collected for the shadow cluster making this feature useful for testing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Shadowing will not be triggered if the primary cluster does not exist.</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;cluster&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;runtime_fraction&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-requestmirrorpolicy-cluster">
<dt>cluster</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) Specifies the cluster that requests will be mirrored to. The cluster must
exist in the cluster manager configuration when the route configuration is loaded.
If it disappears at runtime, the shadow request will silently be ignored.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-requestmirrorpolicy-runtime-fraction">
<dt>runtime_fraction</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-runtimefractionalpercent"><span class="std std-ref">config.core.v3.RuntimeFractionalPercent</span></a>) If not specified, all requests to the target cluster will be mirrored.</p>
<p>For some fraction N/D, a random number in the range [0,D) is selected. If the
number is &lt;= the value of the numerator N, or if the key is not present, the default
value, the request will be mirrored.</p>
</dd>
</dl>
</section>
<section id="extensions-filters-network-thrift-proxy-v3-weightedcluster">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-weightedcluster"></span><h2>extensions.filters.network.thrift_proxy.v3.WeightedCluster<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-weightedcluster" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.27.4/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L175">[extensions.filters.network.thrift_proxy.v3.WeightedCluster proto]</a></p>
<p>Allows for specification of multiple upstream clusters along with weights that indicate the
percentage of traffic to be forwarded to each cluster. The router selects an upstream cluster
based on these weights.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;clusters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusters">
<dt>clusters</dt><dd><p>(<strong>repeated</strong> <a class="reference internal" href="#envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight"><span class="std std-ref">extensions.filters.network.thrift_proxy.v3.WeightedCluster.ClusterWeight</span></a>, <em>REQUIRED</em>) Specifies one or more upstream clusters associated with the route.</p>
</dd>
</dl>
</section>
<section id="extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight">
<span id="envoy-v3-api-msg-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight"></span><h2>extensions.filters.network.thrift_proxy.v3.WeightedCluster.ClusterWeight<a class="headerlink" href="#extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/envoy/blob/v1.27.4/api/envoy/extensions/filters/network/thrift_proxy/v3/route.proto#L179">[extensions.filters.network.thrift_proxy.v3.WeightedCluster.ClusterWeight proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;weight&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;metadata_match&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight-name">
<dt>name</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) Name of the upstream cluster.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight-weight">
<dt>weight</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) When a request matches the route, the choice of an upstream cluster is determined by its
weight. The sum of weights across all entries in the clusters array determines the total
weight.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-weightedcluster-clusterweight-metadata-match">
<dt>metadata_match</dt><dd><p>(<a class="reference internal" href="../../../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-metadata"><span class="std std-ref">config.core.v3.Metadata</span></a>) Optional endpoint metadata match criteria used by the subset load balancer. Only endpoints in
the upstream cluster with metadata matching what is set in this field, combined with what’s
provided in <a class="reference internal" href="#envoy-v3-api-field-extensions-filters-network-thrift-proxy-v3-routeaction-metadata-match"><span class="std std-ref">RouteAction’s metadata_match</span></a>,
will be considered. Values here will take precedence. Keys and values should be provided
under the “envoy.lb” metadata key.</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../tcp_proxy/v3/tcp_proxy.proto.html" class="btn btn-neutral float-left" title="TCP Proxy (proto)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="thrift_proxy.proto.html" class="btn btn-neutral float-right" title="Thrift Proxy (proto)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>