

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.28.0 (October 18, 2023) &mdash; envoy tag-v1.33.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d7d10ef0" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/envoy.css?v=3ec0219e" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4da122e5" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=505370fb"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=db7b0edf"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="v1.27" href="../v1.27/v1.27.html" />
    <link rel="prev" title="1.28.1 (February 9, 2024)" href="v1.28.1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../version_history.html">Version history</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#stable-versions">Stable versions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../version_history.html#archived-versions">Archived versions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../v1.29/v1.29.html">v1.29: 1.29.12 (December 18, 2024)</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="v1.28.html">v1.28: 1.28.7 (September 19, 2024)</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="v1.28.7.html">1.28.7 (September 19, 2024)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.28.6.html">1.28.6 (September 13, 2024)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.28.5.html">1.28.5 (June 30, 2024)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.28.4.html">1.28.4 (June 5, 2024)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.28.3.html">1.28.3 (April 18, 2024)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.28.2.html">1.28.2 (April 4, 2024)</a></li>
<li class="toctree-l4"><a class="reference internal" href="v1.28.1.html">1.28.1 (February 9, 2024)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">1.28.0 (October 18, 2023)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../v1.27/v1.27.html">v1.27: 1.27.7 (June 28, 2024)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.26/v1.26.html">v1.26: 1.26.8 (April 4, 2024)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.25/v1.25.html">v1.25: 1.25.11 (October 16, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.24/v1.24.html">v1.24: 1.24.11 (October 10, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.23/v1.23.html">v1.23: 1.23.12 (July 25, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.22/v1.22.html">v1.22: 1.22.11 (April 11, 2023)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.21/v1.21.html">v1.21: 1.21.6 (November 28, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.20/v1.20.html">v1.20: 1.20.7 (July 21, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.19/v1.19.html">v1.19: 1.19.5 (June 9, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.18/v1.18.html">v1.18: 1.18.6 (February 22, 2022)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.17/v1.17.html">v1.17: 1.17.4 (August 24, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.16/v1.16.html">v1.16: 1.16.5 (August 24, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.15/v1.15.html">v1.15: 1.15.5 (May 11, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.14/v1.14.html">v1.14: 1.14.7 (April 15, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.13/v1.13.html">v1.13: 1.13.8 (January 15, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.12/v1.12.html">v1.12: 1.12.7 (September 29, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.11/v1.11.html">v1.11: 1.11.2 (October 8, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.10/v1.10.html">v1.10: 1.10.0 (April 5, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.9/v1.9.html">v1.9: 1.9.1 (April 2, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.8/v1.8.html">v1.8: 1.8.0 (October 4, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.7/v1.7.html">v1.7: 1.7.1 (August 3, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.6/v1.6.html">v1.6: 1.6.0 (March 20, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.5/v1.5.html">v1.5: 1.5.0 (December 4, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.4/v1.4.html">v1.4: 1.4.0 (August 24, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.3/v1.3.html">v1.3: 1.3.0 (May 17, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.2/v1.2.html">v1.2: 1.2.0 (March 7, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.1/v1.1.html">v1.1: 1.1.0 (November 30, 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v1.0/v1.0.html">v1.0: 1.0.0 (September 12, 2016)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#deprecation-policy">Deprecation Policy</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../version_history.html">Version history</a></li>
          <li class="breadcrumb-item"><a href="v1.28.html">v1.28</a></li>
      <li class="breadcrumb-item active">1.28.0 (October 18, 2023)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/version_history/v1.28/v1.28.0.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="october-18-2023">
<span id="version-history-1-28-0"></span><h1>1.28.0 (October 18, 2023)<a class="headerlink" href="#october-18-2023" title="Link to this heading"></a></h1>
<section id="incompatible-behavior-changes">
<h2>Incompatible behavior changes<a class="headerlink" href="#incompatible-behavior-changes" title="Link to this heading"></a></h2>
<p><em>Changes that are expected to cause an incompatibility if applicable; deployment changes are likely required</em></p>
<ul class="simple">
<li><p><strong>UHV</strong>: Introduced runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.enable_universal_header_validator</span></code> for toggling Universal Header Validator
(UHV) on and off.
The default value is off. This option is currently functional only when the <code class="docutils literal notranslate"><span class="pre">ENVOY_ENABLE_UHV</span></code> build flag is enabled.
See <a class="reference external" href="https://github.com/envoyproxy/envoy/issues/10646">https://github.com/envoyproxy/envoy/issues/10646</a> for more information about UHV.</p></li>
<li><p><strong>eds</strong>: Introduced caching of EDS assignments when used with ADS. Prior to this change, Envoy required that EDS assignments were sent
after an EDS cluster was updated. If no EDS assignment was received for the cluster, it ended up with an empty assignment.
Following this change, after a cluster update, Envoy waits for an EDS assignment until
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/core/v3/config_source.proto.html#envoy-v3-api-field-config-core-v3-configsource-initial-fetch-timeout" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">initial_fetch_timeout</span></a> times out, and will then apply
the cached assignment and finish updating the warmed cluster. This change is disabled by default, and can be enabled by setting
the runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.restart_features.use_eds_cache_for_ads</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><strong>http</strong>: Add runtime flag <code class="docutils literal notranslate"><span class="pre">http.max_requests_per_io_cycle</span></code> for setting the limit on the number of HTTP requests processed
from a single connection in a single I/O cycle. Requests over this limit are processed in subsequent I/O cycles. This
mitigates CPU starvation by connections that simultaneously send high number of requests by allowing requests from other
connections to make progress. This runtime value can be set to 1 in the presence of abusive HTTP/2 or HTTP/3 connections.
By default this limit is disabled.</p></li>
<li><p><strong>http</strong>: Introduced a new runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.no_downgrade_to_canonical_name</span></code> to disable the name downgrading in the
per filter config searching.
See doc <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/intro/arch_overview/http/http_filters.html#arch-overview-http-filters-per-filter-config" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">Http filter route specific config</span></a> or
issue <a class="reference external" href="https://github.com/envoyproxy/envoy/issues/29461">https://github.com/envoyproxy/envoy/issues/29461</a> for more specific detail and examples.</p></li>
<li><p><strong>http</strong>: Switch from http_parser to BalsaParser for handling HTTP/1.1 traffic. See <a class="reference external" href="https://github.com/envoyproxy/envoy/issues/21245">https://github.com/envoyproxy/envoy/issues/21245</a> for
details. This behavioral change can be reverted by setting runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http1_use_balsa_parser</span></code> to
<code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>jwt</strong>: Changed behavior of the JWT extraction, passing entire token for validation, instead cut him in the non-Base64 character.
This change can be reverted temporarily by setting the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.token_passed_entirely</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>udp_proxy</strong>: When the UDP proxy has session filters, choosing the upstream host and creating a socket only happens after iterating all
<code class="docutils literal notranslate"><span class="pre">onNewSession()</span></code> calls for all the filters in the chain. Upstream host health check for each downstream datagram does
not apply when there are session filters, and per-packet load balancing can’t be used when there are session filters.</p></li>
<li><p><strong>zone-aware routing</strong>: Zone-aware routing is now enabled even when the originating and upstream cluster have different numbers of zones.
Previously, zone-aware routing was disabled in that case and the <code class="docutils literal notranslate"><span class="pre">lb_zone_number_differs</span></code> stat on the cluster was incremented.
This behavioral change can be reverted by setting runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.enable_zone_routing_different_zone_counts</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.
Additionally, zone-aware routing now works correctly even when the originating and upstream cluster have different zone sets.
Previously, zone-aware routing would not route fairly in this case.
To revert the entire change, set the runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.locality_routing_use_new_routing_logic</span></code>
to <code class="docutils literal notranslate"><span class="pre">false</span></code> to get the old behavior and well-tested codepaths, undoing both changes.</p></li>
</ul>
</section>
<section id="minor-behavior-changes">
<h2>Minor behavior changes<a class="headerlink" href="#minor-behavior-changes" title="Link to this heading"></a></h2>
<p><em>Changes that may cause incompatibilities for some users, but should not for most</em></p>
<ul class="simple">
<li><p><strong>access_log</strong>: When emitting grpc logs, only downstream HTTP filter state was used. Now, both downstream and upstream HTTP filter states
will be tried to find the keys configured in filter_state_objects_to_log.</p></li>
<li><p><strong>alternate_protocols_cache_filter</strong>: Changed the alternate protocols cache filter to get the cache from cluster config rather than filter config.
This allows one downstream HTTP filter to be used with multiple clusters with different caches. This change can be
reverted by setting runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.use_cluster_cache_for_alt_protocols_filter</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>ext_authz</strong>: Don’t append the local address to <code class="docutils literal notranslate"><span class="pre">x-forwarded-for</span></code> header when sending an http (not gRPC) auth request.
This behavior can be reverted by setting runtime flag
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.ext_authz_http_send_original_xff</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>ext_authz</strong>: Removing any query parameter in the presence of repeated query parameter keys no longer drops the repeats.</p></li>
<li><p><strong>ext_proc</strong>: Envoy will only take
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/service/ext_proc/v3/external_processor.proto.html#envoy-v3-api-field-service-ext-proc-v3-processingresponse-mode-override" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">mode_override</span></a>
when waiting for the header responses. It will be ignored if it is in other processing states.</p></li>
<li><p><strong>http</strong>: Abort the HTTP filter chain iteration when the stream is reset by <code class="docutils literal notranslate"><span class="pre">resetStream()</span></code> of filter callbacks.
This behavior can be reverted by setting
runtime flag <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.abort_filter_chain_on_stream_reset</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>http</strong>: Change the proxy status for <code class="docutils literal notranslate"><span class="pre">UpstreamRequestTimeout</span></code> to <code class="docutils literal notranslate"><span class="pre">HttpResponseTimeout</span></code>.
It can be disabled by the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.proxy_status_upstream_request_timeout</span></code>.</p></li>
<li><p><strong>http oauth2 filter</strong>: Change HMAC cookie encoding to base64-encoded only. This change can be reverted temporarily by
setting the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.hmac_base64_encoding_only</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>local_rate_limit</strong>: Added new configuration field <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/http/local_ratelimit/v3/local_rate_limit.proto.html#envoy-v3-api-field-extensions-filters-http-local-ratelimit-v3-localratelimit-always-consume-default-token-bucket" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">always_consume_default_token_bucket</span></a>
to allow for setting if default token bucket should be always consumed or only be consumed when there is no matching descriptor.</p></li>
<li><p><strong>outlier detection</strong>: A node must stay in healthy state for at least one period of
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/cluster/v3/outlier_detection.proto.html#envoy-v3-api-field-config-cluster-v3-outlierdetection-interval" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">check interval</span></a> before ejection time multiplier is decremented.</p></li>
<li><p><strong>outlier detection</strong>: Outlier detection will always respect <code class="docutils literal notranslate"><span class="pre">max_ejection_percent</span></code> now.
This behavioral change can be reverted by setting runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.check_mep_on_first_eject</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>quic</strong>: Enable QUICHE request and response headers validation. This behavior can be reverted by setting runtime flag
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.FLAGS_envoy_quic_reloadable_flag_quic_act_upon_invalid_header</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>redis</strong>: The redis network filter <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/network/redis_proxy/v3/redis_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-redis-proxy-v3-redisproxy-connectionratelimit-connection-rate-limit-per-sec" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">connection_rate_limit_per_sec</span></a>
must be greater than 0. A config that sets this value to 0 will be rejected.</p></li>
<li><p><strong>router</strong>: Enable copying response_code from the upstream stream_info onto the downstream stream_info.
This behavior can be reverted by setting runtime guard
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.copy_response_code_to_downstream_stream_info</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>router</strong>: Enable environment_variable in router direct response.</p></li>
<li><p><strong>tls</strong>: changed ssl failure reason format in ssl socket for a better handling.
It can be disabled by the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.ssl_transport_failure_reason_format</span></code>.</p></li>
<li><p><strong>tls_inspector</strong>: Updated the security posture of the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/configuration/listeners/listener_filters/tls_inspector.html#config-listener-filters-tls-inspector" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">TLS inspector listener filter</span></a> to
robust against untrusted downstreams and upstreams.</p></li>
<li><p><strong>upstream</strong>: Deprecate code path of legacy upstream load balancer. Ideally, this is implementation detail changes and should not
affect users. However, if there is any user who encounters issues, this behavior can be reverted by setting runtime flag
<code class="docutils literal notranslate"><span class="pre">envoy_reloadable_features_convert_legacy_lb_config</span></code> to false.</p></li>
<li><p><strong>xds</strong>: Set the lower bound of <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/core/v3/config_source.proto.html#envoy-v3-api-field-config-core-v3-ratelimitsettings-fill-rate" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">fill_rate</span></a>
to once per year. Values lower than once per year will automatically be set to that value.</p></li>
</ul>
</section>
<section id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Link to this heading"></a></h2>
<p><em>Changes expected to improve the state of the world and are unlikely to have negative effects</em></p>
<ul class="simple">
<li><p><strong>aws signer</strong>: Fixed a bug where expiration timestamp on task roles failed to validate. This causes failure of credential caching which
results in constant hits to the task role metadata URL.</p></li>
<li><p><strong>connection limit</strong>: Fixed a use-after-free bug in the connection limit filter.</p></li>
<li><p><strong>dns</strong>: Fixed a bug where dns response was not always conforming <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc2181">RFC 2181</a> for TTL values.
Previously a malicious user could add a TTL greater than 2^31 - 1, and with c-ares library using 32 bit signed int data type
would overflow and send a negative TTL.</p></li>
<li><p><strong>dns</strong>: Fixed a bug where when <code class="docutils literal notranslate"><span class="pre">respect_dns_ttl</span></code> was set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, c-ares dns resolver only considered address record for TTL calculation
while ignoring CNAME records TTL. Now when <code class="docutils literal notranslate"><span class="pre">respect_dns_ttl</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> minimum of all TTL records is considered.</p></li>
<li><p><strong>docker/publishing</strong>: Update base images to resolve various glibc vulnerabilities.</p></li>
<li><p><strong>extension_discovery_service</strong>: Fixed a bug causing crash if ECDS is used with upstream HTTP filters.</p></li>
<li><p><strong>healthcheck</strong>: The default behavior of unejecting outlier-detection-ejected host on successful active health checking can
be disabled by setting <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/cluster/v3/outlier_detection.proto.html#envoy-v3-api-field-config-cluster-v3-outlierdetection-successful-active-health-check-uneject-host" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">outlier_detection.successful_active_health_check_uneject_host</span></a>
to <code class="docutils literal notranslate"><span class="pre">false</span></code>. This new configuration flag is a substitute for the removed runtime option
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features_successful_active_health_check_uneject_host</span></code>.</p></li>
<li><p><strong>http</strong>: Close HTTP/2 and HTTP/3 connections that prematurely reset streams. The runtime key
<code class="docutils literal notranslate"><span class="pre">overload.premature_reset_min_stream_lifetime_seconds</span></code> determines the interval where received stream
reset is considered premature (with 1 second default). The runtime key <code class="docutils literal notranslate"><span class="pre">overload.premature_reset_total_stream_count</span></code>,
with the default value of 500, determines the number of requests received from a connection before the check for premature
resets is applied. The connection is disconnected if more than 50% of resets are premature, or if
the number of suspect streams is already large enough to guarantee that more than 50% of the streams will be suspect
upon reaching the total stream threshold (even if all the remaining streams are considered benign).
Setting the runtime key <code class="docutils literal notranslate"><span class="pre">envoy.restart_features.send_goaway_for_premature_rst_streams</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code> completely disables
this check.</p></li>
<li><p><strong>http</strong>: Fixed a bug that could cause metadata to be decoded after a local reply has been triggered.
Can be disabled by setting <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.stop_decode_metadata_on_local_reply</span></code> to false.</p></li>
<li><p><strong>http1</strong>: Fixed a bug where HTTP/1.1 requests with <code class="docutils literal notranslate"><span class="pre">Connection:</span> <span class="pre">close</span></code> header is handled differently if the requested is internally redirected.
Without internal redirect, the response will also have a <code class="docutils literal notranslate"><span class="pre">Connection:</span> <span class="pre">close</span></code> header and the connection will be closed after finishing
that request. Requests with internal redirect should be handled in the same way. This behavior can be reverted by setting runtime
<code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http1_connection_close_header_in_redirect</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>redis</strong>: Fixed a bug where redis key formatter is using the closed stream because of life time issues.</p></li>
<li><p><strong>redis</strong>: Fixed a bug where redis key with % in the key is failing with a validation error.</p></li>
<li><p><strong>router check tool</strong>: Fixed a bug where the route coverage is not correctly calculated when a route has weighted clusters.</p></li>
<li><p><strong>subset load balancer</strong>: Fixed a bug where
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/endpoint/v3/endpoint.proto.html#envoy-v3-api-field-config-endpoint-v3-clusterloadassignment-policy-overprovisioning-factor" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">overprovisioning_factor</span></a> and
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/endpoint/v3/endpoint.proto.html#envoy-v3-api-field-config-endpoint-v3-clusterloadassignment-policy-weighted-priority-health" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">weighted_priority_health</span></a>
values were not respected when subset load balacing was enabled. The default values of <code class="docutils literal notranslate"><span class="pre">140</span></code> and <code class="docutils literal notranslate"><span class="pre">false</span></code> were always used.</p></li>
<li><p><strong>tls</strong>: Fixed a bug where handshake may fail when both private key provider and cert validation are set.</p></li>
<li><p><strong>tracing</strong>: Fixed a bug in the Datadog tracer where Datadog’s “operation name” field would contain what should be in the “resource name” field.</p></li>
<li><p><strong>unix domain sockets</strong>: Fixed a crash on some versions of macOS when using a listener on a unix-domain socket.</p></li>
<li><p><strong>xds</strong>: Fix a bug where the nonce was not reset after reconnecting to the xDS server, when using State-of-the-World.</p></li>
</ul>
</section>
<section id="removed-config-or-runtime">
<h2>Removed config or runtime<a class="headerlink" href="#removed-config-or-runtime" title="Link to this heading"></a></h2>
<p><em>Normally occurs at the end of the</em> <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/version_history/version_history.html#deprecated" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">deprecation period</span></a></p>
<ul class="simple">
<li><p><strong>dns</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.restart_features.use_apple_api_for_dns_lookups</span></code> and legacy code paths.</p></li>
<li><p><strong>ext_authz</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.http_ext_auth_failure_mode_allow_header_add</span></code>
runtime option and substituted it with <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-failure-mode-allow-header-add" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">failure_mode_allow_header_add</span></a>
configuration flag.</p></li>
<li><p><strong>healthcheck</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features_successful_active_health_check_uneject_host</span></code> runtime option and
substituted it with <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/cluster/v3/outlier_detection.proto.html#envoy-v3-api-field-config-cluster-v3-outlierdetection-successful-active-health-check-uneject-host" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">outlier_detection.successful_active_health_check_uneject_host</span></a>
outlier detection configuration flag.</p></li>
<li><p><strong>http filters</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy_reloadable_features_http_filter_avoid_reentrant_local_reply</span></code> runtime flag and legacy code paths.</p></li>
<li><p><strong>listener</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.enable_update_listener_socket_options</span></code> runtime flag and legacy code paths.</p></li>
<li><p><strong>quic</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.reject_require_client_certificate_with_quic</span></code> and legacy code paths.</p></li>
<li><p><strong>runtime</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.restart_features.remove_runtime_singleton</span></code> and legacy code paths.</p></li>
<li><p><strong>runtime</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy_reloadable_features_append_query_parameters_path_rewriter</span></code> and legacy code paths.</p></li>
<li><p><strong>tcp</strong>: Removed runtime key <code class="docutils literal notranslate"><span class="pre">envoy.reloadable_features.tcp_pool_idle_timeout</span></code>.</p></li>
<li><p><strong>tcp_proxy</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy_reloadable_features_finish_reading_on_decode_trailers</span></code> runtime flag and legacy code paths.</p></li>
<li><p><strong>xDS</strong>: Removed <code class="docutils literal notranslate"><span class="pre">envoy.restart_features.explicit_wildcard_resource</span></code> and legacy code paths.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New features<a class="headerlink" href="#new-features" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>access_log</strong>: Added <code class="docutils literal notranslate"><span class="pre">%RESPONSE_FLAGS_LONG%</span></code> substitution string, that will output a pascal case string representing the response flags.
The output response flags will correspond with <code class="docutils literal notranslate"><span class="pre">%RESPONSE_FLAGS%</span></code>, only with a long textual string representation.</p></li>
<li><p><strong>access_log</strong>: Added a field lookup to <code class="docutils literal notranslate"><span class="pre">%FILTER_STATE%</span></code> for objects that have reflection enabled.</p></li>
<li><p><strong>access_logs</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/core/v3/substitution_format_string.proto.html#envoy-v3-api-field-config-core-v3-substitutionformatstring-json-format-options" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">json_format_options</span></a> config option to
support JSON output formatting and the <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/core/v3/substitution_format_string.proto.html#envoy-v3-api-field-config-core-v3-jsonformatoptions-sort-properties" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">sort_properties</span></a>
option to print the JSON output with sorted properties.</p></li>
<li><p><strong>admin</strong>: Added a new <code class="docutils literal notranslate"><span class="pre">skip_exit</span></code> query parameter to <code class="docutils literal notranslate"><span class="pre">/drain_listeners</span></code> to skip exiting after the drain period.</p></li>
<li><p><strong>admin_logging</strong>: added support for glob control of fine-grain loggers in admin /logging interface.</p></li>
<li><p><strong>compression</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/http/compressor/v3/compressor.proto.html#envoy-v3-api-field-extensions-filters-http-compressor-v3-responsedirectionoverrides-remove-accept-encoding-header" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">remove_accept_encoding_header</span></a>
for per-route configuration of this value.</p></li>
<li><p><strong>config</strong>: Added the capability to defer broadcasting of certain cluster (CDS, EDS) to
worker threads from the main thread. This optimization can save significant
amount of memory in cases where there are (1) a large number of workers and
(2) a large amount of config, most of which is unused. This capability is
guarded by <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-clustermanager-enable-deferred-cluster-creation" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">enable_deferred_cluster_creation</span></a>.</p></li>
<li><p><strong>ext_proc</strong>: Added
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/http/ext_proc/v3/ext_proc.proto.html#envoy-v3-api-field-extensions-filters-http-ext-proc-v3-externalprocessor-disable-immediate-response" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">disable_immediate_response</span></a>
config API to ignore the
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/service/ext_proc/v3/external_processor.proto.html#envoy-v3-api-field-service-ext-proc-v3-processingresponse-immediate-response" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">immediate_response</span></a>
message from the external processing server.</p></li>
<li><p><strong>extension_discovery_service</strong>: Added ECDS support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/listener/v3/listener_components.proto.html#envoy-v3-api-field-config-listener-v3-filter-config-discovery" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">downstream network filters</span></a>.</p></li>
<li><p><strong>extension_discovery_service</strong>: Added ECDS support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/cluster/v3/filter.proto.html#envoy-v3-api-field-config-cluster-v3-filter-config-discovery" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">upstream network filters</span></a>.</p></li>
<li><p><strong>extension_discovery_service</strong>: Added metric <code class="docutils literal notranslate"><span class="pre">listener.listener_stat.network_extension_config_missing</span></code> to track closed connections due to missing config.</p></li>
<li><p><strong>filters</strong>: Added filters to update the filter state for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/configuration/http/http_filters/set_filter_state.html#config-http-filters-set-filter-state" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">the HTTP requests</span></a> and
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/configuration/listeners/network_filters/set_filter_state.html#config-network-filters-set-filter-state" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">the TCP connections</span></a>.</p></li>
<li><p><strong>geoip</strong>: Added support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/geoip_providers/maxmind/v3/maxmind.proto.html#envoy-v3-api-msg-extensions-geoip-providers-maxmind-v3-maxmindconfig" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">Maxmind geolocation provider</span></a>.</p></li>
<li><p><strong>http</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/http/json_to_metadata/v3/json_to_metadata.proto.html#envoy-v3-api-msg-extensions-filters-http-json-to-metadata-v3-jsontometadata" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">Json-To-Metadata filter</span></a>.</p></li>
<li><p><strong>http</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpfilter-disabled" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">disabled</span></a>
flag to disable a filter in the filter chain by default. The filter can be enabled explicitly by setting
valid per filter config in the route configuration.</p></li>
<li><p><strong>listener</strong>: Added possibility to track global downstream connection limit via <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/resource_monitors/downstream_connections/v3/downstream_connections.proto.html#envoy-v3-api-msg-extensions-resource-monitors-downstream-connections-v3-downstreamconnectionsconfig" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">downstream connections monitor</span></a> in overload manager.</p></li>
<li><p><strong>lua</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/configuration/http/http_filters/lua_filter.html#config-http-filters-lua-stream-info-downstream-remote-address" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">downstreamRemoteAddress()</span></a>
method to the Stream info object API.</p></li>
<li><p><strong>oauth2</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/http/oauth2/v3/oauth.proto.html#envoy-v3-api-field-extensions-filters-http-oauth2-v3-oauth2config-use-refresh-token" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">use_refresh_token</span></a>
to support updating an access token via a refresh token if that is provided by authorization server.</p></li>
<li><p><strong>original_dst</strong>: added support for the internal listener address recovery using the original destination listener filter.</p></li>
<li><p><strong>otlp_stats_sink</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/stat_sinks/open_telemetry/v3/open_telemetry.proto.html#envoy-v3-api-field-extensions-stat-sinks-open-telemetry-v3-sinkconfig-prefix" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">stats prefix option</span></a>
to OTLP stats sink that enables adding a static prefix to all stats flushed by this sink.</p></li>
<li><p><strong>quic</strong>: Added support for QUIC listener filters with ECDS support reusing the same config API
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/listener/v3/listener.proto.html#envoy-v3-api-field-config-listener-v3-listener-listener-filters" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">listener_filters</span></a> as TCP does.</p></li>
<li><p><strong>redis</strong>: Added new configuration field <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/network/redis_proxy/v3/redis_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-redis-proxy-v3-redisproxy-prefixroutes-route-read-command-policy" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">read_command_policy</span></a>
to specify Envoy should route read commands to another cluster.</p></li>
<li><p><strong>redis</strong>: Added support for <code class="docutils literal notranslate"><span class="pre">lmove</span></code> command.</p></li>
<li><p><strong>redis</strong>: Added support for <code class="docutils literal notranslate"><span class="pre">time</span></code> command (returns a local response).</p></li>
<li><p><strong>router</strong>: Added <code class="docutils literal notranslate"><span class="pre">metadata</span></code> support for <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-virtualhost-metadata" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">virtual host</span></a> and
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/route/v3/route.proto.html#envoy-v3-api-field-config-route-v3-routeconfiguration-metadata" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">route configuration</span></a>.</p></li>
<li><p><strong>tap</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/tap/v3/common.proto.html#envoy-v3-api-field-config-tap-v3-outputsink-custom-sink" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">custom_sink</span></a> type to enable writing tap data
out to a custom sink extension.</p></li>
<li><p><strong>tap</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/http/tap/v3/tap.proto.html#envoy-v3-api-field-extensions-filters-http-tap-v3-tap-record-downstream-connection" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">record_downstream_connection</span></a>
to control writing downstream connection address info in trace output.</p></li>
<li><p><strong>tap</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/http/tap/v3/tap.proto.html#envoy-v3-api-field-extensions-filters-http-tap-v3-tap-record-headers-received-time" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">record_headers_received_time</span></a>
to control writing request and response headers received time in trace output.</p></li>
<li><p><strong>tcp</strong>: Added the support to detect and send TCP RST for raw buffer socket based connections. This is currently supported on Linux only.
It can be disabled by the runtime guard <code class="docutils literal notranslate"><span class="pre">envoy_reloadable_features_detect_and_raise_rst_tcp_connection</span></code>.</p></li>
<li><p><strong>tls</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/transport_sockets/tls/v3/tls.proto.html#envoy-v3-api-field-extensions-transport-sockets-tls-v3-downstreamtlscontext-disable-stateful-session-resumption" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">disable_stateful_session_resumption</span></a> config option to
disable stateful TLS session resumption.</p></li>
<li><p><strong>tls</strong>: Added fallback <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/transport_sockets/tls/v3/common.proto.html#envoy-v3-api-field-extensions-transport-sockets-tls-v3-privatekeyprovider-fallback" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">fallback</span></a>
to support private key provider to fallback to boringssl TLS handshake.
If the private key provider isn’t available (eg. the required hardware capability doesn’t existed),
Envoy will fallback to the BoringSSL default implementation when the fallback is <code class="docutils literal notranslate"><span class="pre">true</span></code>.
The default value is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>tracing</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-tracing-spawn-upstream-span" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">spawn_upstream_span</span></a>
to control whether to create separate upstream span for upstream request.</p></li>
<li><p><strong>tracing</strong>: Added support for exporting spans via HTTP on the OpenTelemetry tracer.</p></li>
<li><p><strong>udp_proxy</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/udp/udp_proxy/session/http_capsule/v3/http_capsule.proto.html#envoy-v3-api-msg-extensions-filters-udp-udp-proxy-session-http-capsule-v3-filterconfig" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">http_capsule</span></a> UDP session filter
that can be used to encapsule or decapsulate UDP datagrams in HTTP, when used for UDP tunneling.</p></li>
<li><p><strong>udp_proxy</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/udp/udp_proxy/v3/udp_proxy.proto.html#envoy-v3-api-field-extensions-filters-udp-udp-proxy-v3-udpproxyconfig-session-filters" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">session_filters</span></a> config to
support optional filters that will run for each upstream UDP session. More information can be found in the UDP proxy documentation.</p></li>
<li><p><strong>udp_proxy</strong>: Added <code class="docutils literal notranslate"><span class="pre">injectDatagramToFilterChain()</span></code> callback to UDP session filters that allows session filters to inject datagrams downstream
or upstream the filter chain during a filter chain iteration. This can be used, for example, by session filters that are required
to buffer datagrams due to an asynchronous call.</p></li>
<li><p><strong>udp_proxy</strong>: added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/udp/udp_proxy/session/dynamic_forward_proxy/v3/dynamic_forward_proxy.proto.html#envoy-v3-api-msg-extensions-filters-udp-udp-proxy-session-dynamic-forward-proxy-v3-filterconfig" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">dynamic_forward_proxy</span></a>
UDP session filter that can be used to have dynamic forward proxy UDP flows, when used in conjunction with another session filter
that sets required filter state values.</p></li>
<li><p><strong>upstream</strong>: Added <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/load_balancing_policies/subset/v3/subset.proto.html#envoy-v3-api-field-extensions-load-balancing-policies-subset-v3-subset-allow-redundant-keys" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">allow_redundant_keys</span></a>
to suppport redundant keys in request metadata for subset load balancing.</p></li>
<li><p><strong>upstream</strong>: Added the ability to specify a custom upstream local address selector using
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/config/core/v3/address.proto.html#envoy-v3-api-field-config-core-v3-bindconfig-local-address-selector" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">local_address_selector</span></a>.</p></li>
<li><p><strong>zookeeper</strong>: Added support for emitting per opcode request bytes metrics via <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/network/zookeeper_proxy/v3/zookeeper_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-zookeeper-proxy-v3-zookeeperproxy-enable-per-opcode-request-bytes-metrics" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">enable_per_opcode_request_bytes_metrics</span></a>.
added support for emitting per opcode response bytes metrics via <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/network/zookeeper_proxy/v3/zookeeper_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-zookeeper-proxy-v3-zookeeperproxy-enable-per-opcode-response-bytes-metrics" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">enable_per_opcode_response_bytes_metrics</span></a>.</p></li>
</ul>
</section>
<section id="deprecated">
<h2>Deprecated<a class="headerlink" href="#deprecated" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>listener</strong>: deprecated runtime key <code class="docutils literal notranslate"><span class="pre">overload.global_downstream_max_connections</span></code> in favor of <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/resource_monitors/downstream_connections/v3/downstream_connections.proto.html#envoy-v3-api-msg-extensions-resource-monitors-downstream-connections-v3-downstreamconnectionsconfig" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">downstream connections monitor</span></a>.</p></li>
<li><p><strong>tracing</strong>: <a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/http/router/v3/router.proto.html#envoy-v3-api-field-extensions-filters-http-router-v3-router-start-child-span" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">start_child_span</span></a>
is deprecated by
<a class="reference external" href="https://www.envoyproxy.io/docs/envoy/v1.28.7/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto.html#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-tracing-spawn-upstream-span" title="(in envoy vtag-v1.28.7)"><span class="xref std std-ref">spawn_upstream_span</span></a>.
Please use the new field to control whether to create separate upstream span for upstream request.</p></li>
<li><p><strong>tracing</strong>: OpenTracing is deprecated and will be removed at version 1.30, since the upstream project has been abandoned.</p></li>
<li><p><strong>tracing</strong>: Opencensus is deprecated and will be removed at version 1.30, since the upstream project has been abandoned.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="v1.28.1.html" class="btn btn-neutral float-left" title="1.28.1 (February 9, 2024)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../v1.27/v1.27.html" class="btn btn-neutral float-right" title="v1.27" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2025, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>