<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Common configuration for two or more load balancing policy extensions (proto) &mdash; envoy tag-v1.32.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=d7d10ef0" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/envoy.css?v=3ec0219e" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/tabs.css?v=4da122e5" />

  
    <link rel="shortcut icon" href="../../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../../_static/documentation_options.js?v=167eb0c8"></script>
        <script src="../../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../../../_static/copybutton.js?v=db7b0edf"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Least Request Load Balancing Policy (proto)" href="../../least_request/v3/least_request.proto.html" />
    <link rel="prev" title="Cluster Provided Load Balancing Policy (proto)" href="../../cluster_provided/v3/cluster_provided.proto.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../index.html">
            
              <img src="../../../../../_static/envoy-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                tag-v1.32.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../api/api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../../api/api_supported_versions.html">Supported API versions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../api.html">v3 API reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../../bootstrap/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../listeners/listeners.html">Listeners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../clusters/clusters.html">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../http_routes/http_routes.html">HTTP route management</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../../config/config.html">Extensions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../../../config/accesslog/filters.html">Access log extension filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/formatter/formatter.html">Access log formatters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/accesslog/accesslog.html">Access loggers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/cluster/cluster.html">Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/common/common.html">Common</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/compression/compression.html">Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/config_validators/config_validators.html">Config validators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/contrib/contrib.html">Contrib extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/dns_resolver/dns_resolver.html">DNS resolver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/endpoint/endpoint.html">Endpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/filter/filter.html">Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/grpc_credential/grpc_credential.html">Grpc credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/health_check_event_sinks/health_check_event_sinks.html">Health check event sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/health_checker/health_checker.html">Health checkers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/http/early_header_mutation.html">HTTP early header mutation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/http/custom_response.html">Custom response policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/http/header_formatters.html">HTTP header formatters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/http/header_validators.html">HTTP header validators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/http/original_ip_detection.html">HTTP original IP detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/http/stateful_session.html">HTTP stateful session</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/injected_credentials/injected_credentials.html">Injected credentials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/geoip_provider/geoip_provider.html">Geolocation providers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/trace/trace.html">HTTP tracers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/internal_redirect/internal_redirect.html">Internal redirect predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/path/match/path_matcher.html">Path matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/path/rewrite/path_rewriter.html">Path rewriter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/quic/quic_extensions.html">Quic extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/descriptors/descriptors.html">Rate limit descriptors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/rbac/rbac.html">RBAC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/rbac/matchers.html">RBAC matchers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/request_id/request_id.html">Request ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/resource_monitor/resource_monitor.html">Resource monitors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/retry/retry.html">Retry predicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/stat_sinks/stat_sinks.html">Stat sinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/string_matcher/string_matcher.html">String Matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/transport_socket/transport_socket.html">Transport sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/upstream/upstream.html">Upstream configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/wasm/wasm.html">WASM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/watchdog/watchdog.html">Watchdog</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../../../../config/load_balancing_policies/load_balancing_policies.html">Load balancing policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../config/cluster_specifier/cluster_specifier.html">Cluster specifier</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../admin/admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../data/data.html">Envoy data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../service/service.html">Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../common_messages/common_messages.html">Common messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../common_messages/common_messages_xds.html">Common messages (XDS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../types/types.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../api-docs/xds_protocol.html">xDS REST and gRPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../api/client_features.html">Well Known Client Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../faq/overview.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../version_history/version_history.html">Version history</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">envoy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../../api/api.html">API</a></li>
          <li class="breadcrumb-item"><a href="../../../../api.html">v3 API reference</a></li>
          <li class="breadcrumb-item"><a href="../../../../config/config.html">Extensions</a></li>
          <li class="breadcrumb-item"><a href="../../../../config/load_balancing_policies/load_balancing_policies.html">Load balancing policies</a></li>
      <li class="breadcrumb-item active">Common configuration for two or more load balancing policy extensions (proto)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/api-v3/extensions/load_balancing_policies/common/v3/common.proto.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="common-configuration-for-two-or-more-load-balancing-policy-extensions-proto">
<span id="envoy-v3-api-file-envoy-extensions-load-balancing-policies-common-v3-common-proto"></span><h1>Common configuration for two or more load balancing policy extensions (proto)<a class="headerlink" href="#common-configuration-for-two-or-more-load-balancing-policy-extensions-proto" title="Link to this heading"></a></h1>
<section id="extensions-load-balancing-policies-common-v3-localitylbconfig">
<span id="envoy-v3-api-msg-extensions-load-balancing-policies-common-v3-localitylbconfig"></span><h2>extensions.load_balancing_policies.common.v3.LocalityLbConfig<a class="headerlink" href="#extensions-load-balancing-policies-common-v3-localitylbconfig" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.1/api/envoy/extensions/load_balancing_policies/common/v3/common.proto#L21">[extensions.load_balancing_policies.common.v3.LocalityLbConfig proto]</a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;zone_aware_lb_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;locality_weighted_lb_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl id="envoy-v3-api-field-extensions-load-balancing-policies-common-v3-localitylbconfig-zone-aware-lb-config">
<dt>zone_aware_lb_config</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-load-balancing-policies-common-v3-localitylbconfig-zoneawarelbconfig"><span class="std std-ref">extensions.load_balancing_policies.common.v3.LocalityLbConfig.ZoneAwareLbConfig</span></a>) Configuration for local zone aware load balancing.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-load-balancing-policies-common-v3-localitylbconfig-zone-aware-lb-config"><span class="std std-ref">zone_aware_lb_config</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-load-balancing-policies-common-v3-localitylbconfig-locality-weighted-lb-config"><span class="std std-ref">locality_weighted_lb_config</span></a> must be set.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-load-balancing-policies-common-v3-localitylbconfig-locality-weighted-lb-config">
<dt>locality_weighted_lb_config</dt><dd><p>(<a class="reference internal" href="#envoy-v3-api-msg-extensions-load-balancing-policies-common-v3-localitylbconfig-localityweightedlbconfig"><span class="std std-ref">extensions.load_balancing_policies.common.v3.LocalityLbConfig.LocalityWeightedLbConfig</span></a>) Enable locality weighted load balancing.</p>
<p>Precisely one of <a class="reference internal" href="#envoy-v3-api-field-extensions-load-balancing-policies-common-v3-localitylbconfig-zone-aware-lb-config"><span class="std std-ref">zone_aware_lb_config</span></a>, <a class="reference internal" href="#envoy-v3-api-field-extensions-load-balancing-policies-common-v3-localitylbconfig-locality-weighted-lb-config"><span class="std std-ref">locality_weighted_lb_config</span></a> must be set.</p>
</dd>
</dl>
</section>
<section id="extensions-load-balancing-policies-common-v3-localitylbconfig-zoneawarelbconfig">
<span id="envoy-v3-api-msg-extensions-load-balancing-policies-common-v3-localitylbconfig-zoneawarelbconfig"></span><h2>extensions.load_balancing_policies.common.v3.LocalityLbConfig.ZoneAwareLbConfig<a class="headerlink" href="#extensions-load-balancing-policies-common-v3-localitylbconfig-zoneawarelbconfig" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.1/api/envoy/extensions/load_balancing_policies/common/v3/common.proto#L24">[extensions.load_balancing_policies.common.v3.LocalityLbConfig.ZoneAwareLbConfig proto]</a></p>
<p>Configuration for <a class="reference internal" href="../../../../../intro/arch_overview/upstream/load_balancing/zone_aware.html#arch-overview-load-balancing-zone-aware-routing"><span class="std std-ref">zone aware routing</span></a>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;routing_enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;min_cluster_size&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;fail_traffic_on_panic&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-load-balancing-policies-common-v3-localitylbconfig-zoneawarelbconfig-routing-enabled">
<dt>routing_enabled</dt><dd><p>(<a class="reference internal" href="../../../../type/v3/percent.proto.html#envoy-v3-api-msg-type-v3-percent"><span class="std std-ref">type.v3.Percent</span></a>) Configures percentage of requests that will be considered for zone aware routing
if zone aware routing is configured. If not specified, the default is 100%.
* <a class="reference internal" href="../../../../../configuration/upstream/cluster_manager/cluster_runtime.html#config-cluster-manager-cluster-runtime-zone-routing"><span class="std std-ref">runtime values</span></a>.
* <a class="reference internal" href="../../../../../intro/arch_overview/upstream/load_balancing/zone_aware.html#arch-overview-load-balancing-zone-aware-routing"><span class="std std-ref">Zone aware routing support</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-load-balancing-policies-common-v3-localitylbconfig-zoneawarelbconfig-min-cluster-size">
<dt>min_cluster_size</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint64value">UInt64Value</a>) Configures minimum upstream cluster size required for zone aware routing
If upstream cluster size is less than specified, zone aware routing is not performed
even if zone aware routing is configured. If not specified, the default is 6.
* <a class="reference internal" href="../../../../../configuration/upstream/cluster_manager/cluster_runtime.html#config-cluster-manager-cluster-runtime-zone-routing"><span class="std std-ref">runtime values</span></a>.
* <a class="reference internal" href="../../../../../intro/arch_overview/upstream/load_balancing/zone_aware.html#arch-overview-load-balancing-zone-aware-routing"><span class="std std-ref">Zone aware routing support</span></a>.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-load-balancing-policies-common-v3-localitylbconfig-zoneawarelbconfig-fail-traffic-on-panic">
<dt>fail_traffic_on_panic</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) If set to true, Envoy will not consider any hosts when the cluster is in <a class="reference internal" href="../../../../../intro/arch_overview/upstream/load_balancing/panic_threshold.html#arch-overview-load-balancing-panic-threshold"><span class="std std-ref">panic
mode</span></a>. Instead, the cluster will fail all
requests as if all hosts are unhealthy. This can help avoid potentially overwhelming a
failing service.</p>
</dd>
</dl>
</section>
<section id="extensions-load-balancing-policies-common-v3-localitylbconfig-localityweightedlbconfig">
<span id="envoy-v3-api-msg-extensions-load-balancing-policies-common-v3-localitylbconfig-localityweightedlbconfig"></span><h2>extensions.load_balancing_policies.common.v3.LocalityLbConfig.LocalityWeightedLbConfig<a class="headerlink" href="#extensions-load-balancing-policies-common-v3-localitylbconfig-localityweightedlbconfig" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.1/api/envoy/extensions/load_balancing_policies/common/v3/common.proto#L47">[extensions.load_balancing_policies.common.v3.LocalityLbConfig.LocalityWeightedLbConfig proto]</a></p>
<p>Configuration for <a class="reference internal" href="../../../../../intro/arch_overview/upstream/load_balancing/locality_weight.html#arch-overview-load-balancing-locality-weighted-lb"><span class="std std-ref">locality weighted load balancing</span></a></p>
</section>
<section id="extensions-load-balancing-policies-common-v3-slowstartconfig">
<span id="envoy-v3-api-msg-extensions-load-balancing-policies-common-v3-slowstartconfig"></span><h2>extensions.load_balancing_policies.common.v3.SlowStartConfig<a class="headerlink" href="#extensions-load-balancing-policies-common-v3-slowstartconfig" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.1/api/envoy/extensions/load_balancing_policies/common/v3/common.proto#L62">[extensions.load_balancing_policies.common.v3.SlowStartConfig proto]</a></p>
<p>Configuration for <a class="reference internal" href="../../../../../intro/arch_overview/upstream/load_balancing/slow_start.html#arch-overview-load-balancing-slow-start"><span class="std std-ref">slow start mode</span></a>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;slow_start_window&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;aggression&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;min_weight_percent&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-load-balancing-policies-common-v3-slowstartconfig-slow-start-window">
<dt>slow_start_window</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) Represents the size of slow start window.
If set, the newly created host remains in slow start mode starting from its creation time
for the duration of slow start window.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-load-balancing-policies-common-v3-slowstartconfig-aggression">
<dt>aggression</dt><dd><p>(<a class="reference internal" href="../../../../config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-runtimedouble"><span class="std std-ref">config.core.v3.RuntimeDouble</span></a>) This parameter controls the speed of traffic increase over the slow start window. Defaults to 1.0,
so that endpoint would get linearly increasing amount of traffic.
When increasing the value for this parameter, the speed of traffic ramp-up increases non-linearly.
The value of aggression parameter should be greater than 0.0.
By tuning the parameter, is possible to achieve polynomial or exponential shape of ramp-up curve.</p>
<p>During slow start window, effective weight of an endpoint would be scaled with time factor and aggression:
<code class="docutils literal notranslate"><span class="pre">new_weight</span> <span class="pre">=</span> <span class="pre">weight</span> <span class="pre">*</span> <span class="pre">max(min_weight_percent,</span> <span class="pre">time_factor</span> <span class="pre">^</span> <span class="pre">(1</span> <span class="pre">/</span> <span class="pre">aggression))</span></code>,
where <code class="docutils literal notranslate"><span class="pre">time_factor=(time_since_start_seconds</span> <span class="pre">/</span> <span class="pre">slow_start_time_seconds)</span></code>.</p>
<p>As time progresses, more and more traffic would be sent to endpoint, which is in slow start window.
Once host exits slow start, time_factor and aggression no longer affect its weight.</p>
</dd>
</dl>
<dl class="simple" id="envoy-v3-api-field-extensions-load-balancing-policies-common-v3-slowstartconfig-min-weight-percent">
<dt>min_weight_percent</dt><dd><p>(<a class="reference internal" href="../../../../type/v3/percent.proto.html#envoy-v3-api-msg-type-v3-percent"><span class="std std-ref">type.v3.Percent</span></a>) Configures the minimum percentage of origin weight that avoids too small new weight,
which may cause endpoints in slow start mode receive no traffic in slow start window.
If not specified, the default is 10%.</p>
</dd>
</dl>
</section>
<section id="extensions-load-balancing-policies-common-v3-consistenthashinglbconfig">
<span id="envoy-v3-api-msg-extensions-load-balancing-policies-common-v3-consistenthashinglbconfig"></span><h2>extensions.load_balancing_policies.common.v3.ConsistentHashingLbConfig<a class="headerlink" href="#extensions-load-balancing-policies-common-v3-consistenthashinglbconfig" title="Link to this heading"></a></h2>
<p><a class="extlink-repo reference external" href="https://github.com/envoyproxy/envoy/blob/v1.32.1/api/envoy/extensions/load_balancing_policies/common/v3/common.proto#L89">[extensions.load_balancing_policies.common.v3.ConsistentHashingLbConfig proto]</a></p>
<p>Common Configuration for all consistent hashing load balancers (MaglevLb, RingHashLb, etc.)</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;use_hostname_for_hashing&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;hash_balance_factor&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple" id="envoy-v3-api-field-extensions-load-balancing-policies-common-v3-consistenthashinglbconfig-use-hostname-for-hashing">
<dt>use_hostname_for_hashing</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the cluster will use hostname instead of the resolved
address as the key to consistently hash to an upstream host. Only valid for StrictDNS clusters with hostnames which resolve to a single IP address.</p>
</dd>
</dl>
<dl id="envoy-v3-api-field-extensions-load-balancing-policies-common-v3-consistenthashinglbconfig-hash-balance-factor">
<dt>hash_balance_factor</dt><dd><p>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) Configures percentage of average cluster load to bound per upstream host. For example, with a value of 150
no upstream host will get a load more than 1.5 times the average load of all the hosts in the cluster.
If not specified, the load is not bounded for any upstream host. Typical value for this parameter is between 120 and 200.
Minimum is 100.</p>
<p>Applies to both Ring Hash and Maglev load balancers.</p>
<p>This is implemented based on the method described in the paper <a class="reference external" href="https://arxiv.org/abs/1608.01350">https://arxiv.org/abs/1608.01350</a>. For the specified
<code class="docutils literal notranslate"><span class="pre">hash_balance_factor</span></code>, requests to any upstream host are capped at <code class="docutils literal notranslate"><span class="pre">hash_balance_factor/100</span></code> times the average number of requests
across the cluster. When a request arrives for an upstream host that is currently serving at its max capacity, linear probing
is used to identify an eligible host. Further, the linear probe is implemented using a random jump in hosts ring/table to identify
the eligible host (this technique is as described in the paper <a class="reference external" href="https://arxiv.org/abs/1908.08762">https://arxiv.org/abs/1908.08762</a> - the random jump avoids the
cascading overflow effect when choosing the next host in the ring/table).</p>
<p>If weights are specified on the hosts, they are respected.</p>
<p>This is an O(N) algorithm, unlike other load balancers. Using a lower <code class="docutils literal notranslate"><span class="pre">hash_balance_factor</span></code> results in more hosts
being probed, so use a higher value if you require better performance.</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../cluster_provided/v3/cluster_provided.proto.html" class="btn btn-neutral float-left" title="Cluster Provided Load Balancing Policy (proto)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../least_request/v3/least_request.proto.html" class="btn btn-neutral float-right" title="Least Request Load Balancing Policy (proto)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, Envoy Project Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>